<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8a3be474ae26740c6f65.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}html{font-family:Poppins,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:30px;font-weight:500;padding:20px 0 0;line-height:1.8em;position:relative;color:#333;width:100%;height:100%}body{box-sizing:border-box;background:#fff;margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;color:#333;-webkit-text-decoration-skip:objects;font-weight:700}a:active,a:hover{outline-width:0;color:#099;opacity:.8}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:30px}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl{margin:0 0 1.45rem}dd,dl,p{padding:0}p{margin-left:0;margin-right:0;margin-top:0}figure{padding:0}figure,pre{margin:0 0 1.45rem}pre{font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:20px 0 10px;margin:0 1.45rem 1.45rem;color:#757575}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}h1,h2,h3,h4,h5,h6{color:#333}h1{font-weight:500}h2,h3,h4,h5,h6{background:transparent;margin-top:40px;font-weight:700;display:inline-block}.gatsby-highlight{border-radius:20px;margin:10px 0 20px}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 3.0.4"/><style data-styled="" data-styled-version="5.2.1">.hKUvcS{max-width:1280px;margin:0 auto;padding-top:0;}/*!sc*/
.hKUvcS h1{font-size:34px;}/*!sc*/
@media (min-width:1024px){.hKUvcS h1{font-size:50px;}}/*!sc*/
@media (min-width:1024px){.hKUvcS{padding-top:50px;}}/*!sc*/
data-styled.g1[id="Section-zthcy2-0"]{content:"hKUvcS,"}/*!sc*/
.RfRpu{display:inline-block;text-align:left;width:40%;}/*!sc*/
data-styled.g3[id="Header__Logo-sc-160kmj-1"]{content:"RfRpu,"}/*!sc*/
.bHSrwR{display:inline-block;height:40px;width:20%;}/*!sc*/
@media (min-width:768px){.bHSrwR{display:none;}}/*!sc*/
.bHSrwR img{border-radius:50%;margin-bottom:0;}/*!sc*/
data-styled.g4[id="Header__LogoMobile-sc-160kmj-2"]{content:"bHSrwR,"}/*!sc*/
.kzsPVe{display:none;}/*!sc*/
@media (min-width:768px){.kzsPVe{display:inline-block;}}/*!sc*/
data-styled.g5[id="Header__LogoDesktop-sc-160kmj-3"]{content:"kzsPVe,"}/*!sc*/
.Ocybt{background:#000;color:#fff;margin:0 auto;padding:10px 15px;position:fixed;text-transform:uppercase;top:0;width:100%;z-index:10;box-sizing:border-box;pointer-events:auto;}/*!sc*/
@media (min-width:768px){.Ocybt{line-height:auto;padding:15px;right:0;padding-top:2vw;padding-bottom:2vw;padding-left:4vw;padding-right:4vw;}}/*!sc*/
.Ocybt a{font-weight:900;color:#fff;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.Ocybt a:hover{color:#fff;opacity:1;-webkit-text-decoration:underline;text-decoration:underline;text-underline-offset:10px;}/*!sc*/
data-styled.g6[id="Header__Nav-sc-160kmj-4"]{content:"Ocybt,"}/*!sc*/
.PjytW{position:relative;overflow-x:auto;padding-top:0;font-size:21px;}/*!sc*/
@media (min-width:1024px){.PjytW{padding:0 20px;max-width:1280px;}}/*!sc*/
data-styled.g7[id="Header__Wrapper-sc-160kmj-5"]{content:"PjytW,"}/*!sc*/
.iLSqRZ{display:inline-block;position:absolute;right:0;}/*!sc*/
@media (min-width:768px){.iLSqRZ{line-height:inherit;}}/*!sc*/
.iLSqRZ a{padding:0;font-size:15px;margin-right:10px;}/*!sc*/
.iLSqRZ a:last-child:after{margin-right:0;}/*!sc*/
@media (min-width:768px){.iLSqRZ a{font-size:21px;margin-right:25px;}}/*!sc*/
data-styled.g8[id="Header__Links-sc-160kmj-6"]{content:"iLSqRZ,"}/*!sc*/
.llqpgS{color:#000;font-size:16px;padding:15px 0;text-align:center;}/*!sc*/
data-styled.g9[id="Footer__Text-sc-14qtz8p-0"]{content:"llqpgS,"}/*!sc*/
.evCYdc{width:100%;min-height:200px;border-top:2px solid #f0f0f2;margin:75px 0 0 0;font-size:16px;text-transform:uppercase;text-align:center;box-sizing:border-box;background:#f0f0f2;}/*!sc*/
.evCYdc ul{display:block;margin:0;margin-bottom:70px;}/*!sc*/
@media (min-width:768px){.evCYdc ul{display:inline-block;vertical-align:middle;}}/*!sc*/
.evCYdc li{display:block;padding:10px;}/*!sc*/
@media (min-width:768px){.evCYdc li{display:inline-block;margin-right:25px;}}/*!sc*/
.evCYdc li a:hover{opacity:0.8;}/*!sc*/
data-styled.g10[id="Footer__PageFooter-sc-14qtz8p-1"]{content:"evCYdc,"}/*!sc*/
.cIXHvf{padding:15px 7px 15px 0;margin:0 auto;width:100%;overflow:hidden;max-width:1280px;font-size:20px;line-height:1.5em;padding:30px 0 0;position:relative;vertical-align:top;}/*!sc*/
@media (min-width:768px){.cIXHvf{font-size:22px;}}/*!sc*/
.cIXHvf pre{border-radius:0;font-size:0.8em;}/*!sc*/
data-styled.g11[id="Layout__Wrapper-xnlv4k-0"]{content:"cIXHvf,"}/*!sc*/
.bBuSAy{display:inline-block;padding:15px;vertical-align:top;width:100%;}/*!sc*/
data-styled.g12[id="Layout__Main-xnlv4k-1"]{content:"bBuSAy,"}/*!sc*/
.fNwryo{font-style:normal;font-weight:900;line-height:1em;margin:50px 0 20px 0;font-size:30px;-webkit-letter-spacing:-2px;-moz-letter-spacing:-2px;-ms-letter-spacing:-2px;letter-spacing:-2px;}/*!sc*/
@media (min-width:768px){.fNwryo{font-size:50px;line-height:1em;margin:70px 0 20px 0;}}/*!sc*/
data-styled.g13[id="Title-sc-1g46602-0"]{content:"fNwryo,"}/*!sc*/
.kSQOnO img{vertical-align:middle;aspect-ratio:auto 245 / 192;}/*!sc*/
.kSQOnO p img{text-align:center;display:block;margin:20px auto;}/*!sc*/
.kSQOnO p .language-text{margin-right:5px;}/*!sc*/
.kSQOnO hr{border:none;background:transparent;color:#111;-webkit-letter-spacing:1em;-moz-letter-spacing:1em;-ms-letter-spacing:1em;letter-spacing:1em;text-align:center;margin-top:10px;margin-bottom:50px;}/*!sc*/
@media (min-width:768px){.kSQOnO hr{margin-bottom:70px;}}/*!sc*/
.kSQOnO hr:before{content:'...';}/*!sc*/
data-styled.g24[id="PostContent__PostWrapper-sc-1jf6w5a-0"]{content:"kSQOnO,"}/*!sc*/
.dVZbmD{color:#4e4c4c;display:block;font-style:italic;margin-bottom:20px;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;line-height:1em;margin-top:10px;text-align:left;text-transform:capitalize;font-size:20px;}/*!sc*/
data-styled.g25[id="PostDate-okmp83-0"]{content:"dVZbmD,"}/*!sc*/
</style><title data-react-helmet="true">Using Typescript in a NodeJS module | Wilson Mendes</title><meta data-react-helmet="true" name="description" content="Senior Frontend-Engineer, Senior Software-Developer, Google Developer Expert Wen Technologies, Microsoft MVP Developer Technologies"/><meta data-react-helmet="true" property="og:title" content="Using Typescript in a NodeJS module"/><meta data-react-helmet="true" property="og:description" content="Senior Frontend-Engineer, Senior Software-Developer, Google Developer Expert Wen Technologies, Microsoft MVP Developer Technologies"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:title" content="Using Typescript in a NodeJS module"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:description" content="Senior Frontend-Engineer, Senior Software-Developer, Google Developer Expert Wen Technologies, Microsoft MVP Developer Technologies"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><link href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css" rel="stylesheet"/><link rel="icon" href="/favicon-32x32.png?v=b897f62d006f8ad8d87b6fc5786692ba" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b897f62d006f8ad8d87b6fc5786692ba"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLBT5Z1xlFQ.woff2"/><style>@font-face{font-family:Poppins;font-style:normal;font-weight:500;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");font-display:swap}@font-face{font-family:Poppins;font-style:normal;font-weight:700;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");font-display:swap}@font-face{font-family:Poppins;font-style:normal;font-weight:900;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLBT5Z1xlFQ.woff2) format("woff2");font-display:swap}@font-face{font-family:Poppins;font-style:normal;font-weight:500;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z1xlEw.woff) format("woff");font-display:swap}@font-face{font-family:Poppins;font-style:normal;font-weight:700;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlEw.woff) format("woff");font-display:swap}@font-face{font-family:Poppins;font-style:normal;font-weight:900;src:url(/static/webfonts/s/poppins/v15/pxiByp8kv8JHgFVrLBT5Z1xlEw.woff) format("woff");font-display:swap}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Will Mendes Blog RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-23e80c2ddd056a24e52f.js"/><link as="script" rel="preload" href="/framework-5a0f89685a3614932ea6.js"/><link as="script" rel="preload" href="/app-a4dce349d972e2f96f4f.js"/><link as="script" rel="preload" href="/c38806a22704b1411d609490b31463a94158f97c-251d4b46df1e4f161a6b.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-20d5c25fe44c354044f8.js"/><link as="fetch" rel="preload" href="/page-data/posts/using-typescript-in-a-nodejs-module/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__PageHeader-sc-160kmj-0 coHUrI"><nav class="Header__Nav-sc-160kmj-4 Ocybt"><section class="Section-zthcy2-0 Header__Wrapper-sc-160kmj-5 hKUvcS PjytW"><span class="Header__Logo-sc-160kmj-1 Header__LogoMobile-sc-160kmj-2 RfRpu bHSrwR"><a href="/">WM</a></span><span class="Header__Logo-sc-160kmj-1 Header__LogoDesktop-sc-160kmj-3 RfRpu kzsPVe"><a href="/">Wilson Mendes</a></span><div class="Header__Links-sc-160kmj-6 iLSqRZ"><a href="/posts/">posts</a><a href="/talks/">talks</a></div></section></nav></header><div class="Layout__Wrapper-xnlv4k-0 cIXHvf"><main class="Layout__Main-xnlv4k-1 bBuSAy"><section class="Section-zthcy2-0 hKUvcS"><h1 class="Title-sc-1g46602-0 fNwryo">Using Typescript in a NodeJS module</h1><time class="PostDate-okmp83-0 dVZbmD">July 30, 2017<!-- --> - <!-- -->6 min read</time><article class="PostContent__PostWrapper-sc-1jf6w5a-0 kSQOnO"><div><p><img src="https://cdn-images-1.medium.com/max/2560/1*SSo_VpLEJ49WTi_ubpTVGQ.png">
undefined</p>
<p>… or Typescript + NodeJS = ❤</p>
<p>TypeScript is a really mature project built by Microsoft and supported by communities around the world, with the main goal to bring types to JavaScript, being <a href="https://blogs.msdn.microsoft.com/typescript/2014/10/22/typescript-and-the-road-to-2-0/" target="_blank" rel="nofollow noopener noreferrer">a superset of standard JavaScript</a>. Since we have several cases sharing the benefits of types usage in Javascript, such as <a href="https://redditblog.com/2017/06/30/why-we-chose-typescript/" target="_blank" rel="nofollow noopener noreferrer">Reddit</a>, <a href="https://blog.asana.com/2014/11/asana-switching-typescript/" target="_blank" rel="nofollow noopener noreferrer">Asana</a> and <a href="https://github.com/NativeScript/NativeScript" target="_blank" rel="nofollow noopener noreferrer">NativeScript</a> and there are lots of available Typescript tooling in a well covered state with a quick integration.</p>
<p>After felt the taste of Typescript with Angular and like it, I give it a try on a NodeJS module called <a href="https://github.com/willmendesneto/feature-toggle-service" target="_blank" rel="nofollow noopener noreferrer">feature-toggle-service</a> which I started in Javascript and now using Typescript.</p>
<p>Since I’m using <a href="https://martinfowler.com/articles/feature-toggles.html" target="_blank" rel="nofollow noopener noreferrer">feature toggle technique</a>s (which I strongly recommend you if you’re not familiar with the concept) in some projects to allow teams to modify system behaviours without code changes, I built small components in some frameworks and libraries such as Angular and React.</p>
<p>Then <a href="https://github.com/willmendesneto/feature-toggle-service" target="_blank" rel="nofollow noopener noreferrer">feature-toggle-service</a> was built based on the component boundaries, one of the most useful NodeJS and software best practices. The main goal is simple: decoupling the logic into a small package and make the idea around feature toggle configuration and validation easier and have integration options for pure Javascript, frameworks and/or libraries.</p>
<p>As a example of this approach you can take a look into <a href="https://github.com/willmendesneto/ngx-feature-toggle" target="_blank" rel="nofollow noopener noreferrer">Angular</a> and <a href="https://github.com/willmendesneto/reactor-feature-toggle" target="_blank" rel="nofollow noopener noreferrer">React</a> component components for Feature toggles/flags.</p>
<blockquote>
<p>If you want to know more about best practices designing NodeJS systems, take a look in this thread on Quora.</p>
</blockquote>
<p><a href="https://www.quora.com/What-are-some-best-architecture-practices-when-designing-a-nodejs-system" title="https://www.quora.com/What-are-some-best-architecture-practices-when-designing-a-nodejs-system" target="_blank" rel="nofollow noopener noreferrer"><strong>What are some best architecture practices when designing a nodejs system?</strong>
<em>Answer (1 of 3): Don’t write big apps. The more custom code is running in the same process, the harder it gets to…</em>www.quora.com</a><a href="https://www.quora.com/What-are-some-best-architecture-practices-when-designing-a-nodejs-system" target="_blank" rel="nofollow noopener noreferrer"></a></p>
<h3>Setup</h3>
<p>The bootstrap of a project with Typescript is something really quick. First of all you need to install some NodeJS packages for support, execution environment and type definition management via command</p>
<p><code class="language-text">yarn install -D ts-node typescript typings</code></p>
<p>These packages are:</p>
<ul>
<li>ts-node: TypeScript execution environment;</li>
<li>typescript: Support for Typescript in NodeJS;</li>
<li>typings: TypeScript Definition Manager;</li>
</ul>
<p>To do this we will use the <code class="language-text">tsc</code> and <code class="language-text">typings</code> command line executables inside our node<em>modules folder. These were installed via Typescript and Typings respectively. So that, we will create the <code class="language-text">tsconfig.json</code> file using the command `./node</em>modules/.bin/tsc --init` with all information related to your application.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ES5"</span><span class="token punctuation">,</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"lib"</span><span class="token punctuation">,</span>
    <span class="token property">"rootDir"</span><span class="token operator">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span>
    <span class="token property">"removeComments"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>That’s the default configuration for the published package. With that the first step is migrate all the files from <code class="language-text">.js</code> to <code class="language-text">.ts</code>, adding types when is required. Typescript is really smart, so in some functions, classes and methods you can suppress type syntax, because it's something already implicit via code.</p>
<p>As a example, this snippet with the function <code class="language-text">isOn</code> is return a <code class="language-text">boolean</code> by default since the operator <code class="language-text">!!</code> transforms the response in a boolean by default. This logic can be applied for methods <code class="language-text">void</code> and other methods as well.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> settings<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">isOn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>settings<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Unit tests</h3>
<p>NPM scripts is a flexible approach, enabling access from local and global Node packages. This is one of the reasons to add all the tasks of the project inside <code class="language-text">package.json</code> in the current repository.</p>
<p>Unit tests is something <strong><em>crucial</em></strong> if you're thinking in best practices to evolve your package and add it as a open source project and that was the first step in after change files from <code class="language-text">.js</code> to <code class="language-text">.ts</code>. So before the tests we have a lint task and when the test suit is running the coverage is collected</p>
<p>The tests have a small requirement to build the <code class="language-text">.ts</code> files and after that call use the bundle files in your test suit.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"compile"</span><span class="token operator">:</span> <span class="token string">"tsc"</span><span class="token punctuation">,</span>
  <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"npm run compile &amp;&amp; npm run code-coverage"</span><span class="token punctuation">,</span>
  <span class="token property">"code-coverage"</span><span class="token operator">:</span> <span class="token string">"NODE_ENV=test nyc — reporter=lcov — reporter=text-summary mocha ./test/*.spec.js — require ./test/setup.js"</span><span class="token punctuation">,</span>
  <span class="token property">"pretest"</span><span class="token operator">:</span> <span class="token string">"tslint src"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So that when <code class="language-text">yarn test</code> is running all the lint and code coverage is triggered by default.</p>
<h3>Publishing</h3>
<p>Publish a package is a common task in every single package release and a good tool for help on package publish automation is <a href="https://www.npmjs.com/package/semantic-release" target="_blank" rel="nofollow noopener noreferrer">semantic-version</a>, which can runs in your continuous integration/continuous delivery. It's not a Typescript tooling, but it's heavily used in OSS — <em>Open source projects</em>.</p>
<p>If you want to know how to integrate this package into your repository and understand all required steps, please watch the Egghead's video "<strong>How to Write a JavaScript Library — Automating Releases with semantic-release</strong>".</p>
<p><a href="https://egghead.io/lessons/javascript-how-to-write-a-javascript-library-automating-releases-with-semantic-release" target="_blank" rel="nofollow noopener noreferrer"><strong>Automating Releases with semantic-release - js Video Tutorial #free</strong>
<em>There are so many repeated steps when releasing a new version of a library. The tool semantic-release automates this…</em>egghead.io</a></p>
<p>Another approach that can be combined is the <a href="https://www.thoughtworks.com/radar/techniques/canary-builds" target="_blank" rel="nofollow noopener noreferrer">Canary build</a>, which can be added in your repository using <a href="https://greenkeeper.io/" target="_blank" rel="nofollow noopener noreferrer">Greenkeeper</a>, sending pull requests in real time with all bumps and updates for NPM dependencies.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*EMlbRkbWCk6EFRP0eQokMQ.png"></p>
<blockquote>
<p>Please read the post by Kent C Dodds sharing some good points about open source and how to contribute.</p>
</blockquote>
<p><a href="https://medium.com/@kentcdodds/introducing-how-to-contribute-to-open-source-be67917eb704" title="https://medium.com/@kentcdodds/introducing-how-to-contribute-to-open-source-be67917eb704" target="_blank" rel="nofollow noopener noreferrer"><strong>Introducing: How to Contribute to Open Source</strong>
<em>My new, free, first-timer friendly Egghead.io series all about how to contribute to open source projects on GitHub.</em>medium.com</a><a href="https://medium.com/@kentcdodds/introducing-how-to-contribute-to-open-source-be67917eb704" target="_blank" rel="nofollow noopener noreferrer"></a></p>
<hr/>
<h3>Conclusion</h3>
<p>I hope you enjoyed this post and try to use Typescript in your projects, sharing your experience as well. The good outcome is this migration is something transparent for the package consumers and it will help in next features, refactors and other improvements.</p>
<p>IF you are interested in see the final solution, please take a look in the <a href="https://github.com/willmendesneto/feature-toggle-service" target="_blank" rel="nofollow noopener noreferrer">Github repository</a>. In the next post I will share the benefits of code decouple and how it will help in aspects such as reuse and flexibility. That's all folks!</p>
<h3>Links</h3>
<p>Martin Fowler: post about feature toggles <a href="https://martinfowler.com/articles/feature-toggles.html" target="_blank" rel="nofollow noopener noreferrer">https://martinfowler.com/articles/feature-toggles.html</a></p>
<p>Feature toggle service: <a href="https://github.com/willmendesneto/feature-toggle-service" target="_blank" rel="nofollow noopener noreferrer">https://github.com/willmendesneto/feature-toggle-service</a></p>
<p>NGX Feature toggle: Angular component for feature toggles <a href="https://github.com/willmendesneto/ngx-feature-toggle" target="_blank" rel="nofollow noopener noreferrer">https://github.com/willmendesneto/ngx-feature-toggle</a></p>
<p>Reactor Feature toggle: React component for feature toggles <a href="https://github.com/willmendesneto/reactor-feature-toggle" target="_blank" rel="nofollow noopener noreferrer">https://github.com/willmendesneto/reactor-feature-toggle</a></p>
<p>Introducing: How to Contribute to Open Source: <a href="https://medium.com/@kentcdodds/introducing-how-to-contribute-to-open-source-be67917eb704" target="_blank" rel="nofollow noopener noreferrer">https://medium.com/@kentcdodds/introducing-how-to-contribute-to-open-source-be67917eb704</a></p></div></article></section></main></div><footer class="Footer__PageFooter-sc-14qtz8p-1 evCYdc"><ul><li><a href="https://twitter.com/willmendesneto" target="_blank" rel="noopener noreferrer">Twitter</a></li><li><a href="https://github.com/willmendesneto" target="_blank" rel="noopener noreferrer">Github</a></li><li><a href="/rss.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><p class="Footer__Text-sc-14qtz8p-0 llqpgS">made by me with<!-- --> <span role="img" aria-label="love">❤️</span> <!-- -->since 2014</p></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-58169656-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/using-typescript-in-a-nodejs-module";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2645f3231365ba51a296.js"],"app":["/app-a4dce349d972e2f96f4f.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-1bc4087bda7d163b6bc1.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d991251d90476ebcd163.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-0131fe49b0c3c81f4a45.js"],"component---src-pages-index-js":["/component---src-pages-index-js-768f221821aa187b9b2d.js"],"component---src-pages-posts-js":["/component---src-pages-posts-js-cc69178b0a79363bc455.js"],"component---src-pages-talks-js":["/component---src-pages-talks-js-f9aa2b44549f3d72d71f.js"],"component---src-pages-workshops-js":["/component---src-pages-workshops-js-a1bb33d608065aa003cf.js"],"component---src-templates-post-js":["/component---src-templates-post-js-20d5c25fe44c354044f8.js"]};/*]]>*/</script><script src="/polyfill-2645f3231365ba51a296.js" nomodule=""></script><script src="/component---src-templates-post-js-20d5c25fe44c354044f8.js" async=""></script><script src="/c38806a22704b1411d609490b31463a94158f97c-251d4b46df1e4f161a6b.js" async=""></script><script src="/app-a4dce349d972e2f96f4f.js" async=""></script><script src="/framework-5a0f89685a3614932ea6.js" async=""></script><script src="/webpack-runtime-23e80c2ddd056a24e52f.js" async=""></script></body></html>