{"componentChunkName":"component---src-templates-post-js","path":"/posts/sanitizing-sensitive-data-from-your-logs-with-pinojs-and-pino-sanitize/","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1210px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be4de8fcaf070abfb55bfc952ec58df3/b6207/image-hero.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.5625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVR42iWRXW8SYRSEN16Y+ANMQwwWolCbLISF/WQ/YNnCLrSmNpW2hLJSarBRqzYqLkK90MRivPDvGm8eX7YXk5OcTObMzJFM22FyPmLx4yPx+ze4YQ/dMDHNW1iWRb1eT2HbNovlkmf7+5R1k7Ll4jYafLu+ptvtYhgGUqVS5ajfZjk74OR5j6jl0vFtfN/H8zwcx0HXdRRFIQgCft3cUNEMXulFflp5lJLMl2ROPBohyzJSYXOTaDxk8H3JYNBnOjxgcrJH0GyiVauoQuhJoUAum6XT8vk8XxA9yvDXvgOexKp4j+FkysvxC7KZDFIxn+f4+JDXk1ParR12d5/i1B1xuYRaqVDa3uZxLsdDQY6Ew6tZQpS7z7+1YEPid+EuR/EZ07MxDzY2kLygzdWntySXY86Hh8TDPqM4ZqfdTvtxXDeNXK3VbiOvViiivw9GkT/1PFpZZjb/mkYuCRPSmty5eEdvekng6+yFLbxGk1pNxBUimqqiaRqqmOsnJUlCN4rYUlSKmoVhWszFLgzDtOf/mVXcY4vWOgoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/be4de8fcaf070abfb55bfc952ec58df3/fb34c/image-hero.avif 320w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/646cd/image-hero.avif 768w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/8b485/image-hero.avif 1024w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/21711/image-hero.avif 1210w\"\n              sizes=\"(max-width: 1210px) 100vw, 1210px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/be4de8fcaf070abfb55bfc952ec58df3/cb523/image-hero.webp 320w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/cd067/image-hero.webp 768w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/53334/image-hero.webp 1024w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/7fc03/image-hero.webp 1210w\"\n              sizes=\"(max-width: 1210px) 100vw, 1210px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/be4de8fcaf070abfb55bfc952ec58df3/d4f27/image-hero.png 320w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/778aa/image-hero.png 768w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/658fc/image-hero.png 1024w,\n/static/be4de8fcaf070abfb55bfc952ec58df3/b6207/image-hero.png 1210w\"\n            sizes=\"(max-width: 1210px) 100vw, 1210px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/be4de8fcaf070abfb55bfc952ec58df3/b6207/image-hero.png\"\n            alt=\"image hero\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2>Introduction</h2>\n<p>As your project is scaling and used for more customers, your architecture is becoming more spread. This is a common and well known effect, so the ability to monitor logs is essential at this stage.</p>\n<p>Have a log support in your project will provide a deeper visibility into application and infrastructure in topics such as performance data, events and errors, and quickly troubleshoot production incidents... and sometimes something that powerful might create other issues to be solved. Let's understand more about these issues.</p>\n<h2>The problem with sensitive data in logs</h2>\n<p>At first, when you're logging sometimes you're not checking all the data inside the log function as payload. So the content can be a string with a text, a simple object or a robust structure - anything that makes sense to you to track or help during your troubleshooting. And that's the main problem.</p>\n<p>With the advent of new legislation rules like <a href=\"https://en.wikipedia.org/wiki/General_Data_Protection_Regulation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">General Data Protection Regulation - aka GDPR</a> or correlate laws, the companies are now responsible with the user's data. And logging is also included and affected by those new rules.</p>\n<p>It will require to apply some mechanisms in your log platform to remove the sensitive data stored in there until today. In addition to that, you also need to make sure the current application is not logging any sensitive data. You can apply these changes on the log function that your project is calling to send the information into your logging platform.</p>\n<p>However, for safety reasons you might also apply the sanitize and strip data in another level than your application. So that, you are fully covered that any the specified sensitive data won't be added into your logs and your company won't be legally affected by it.</p>\n<h2>Solving it before reaching your log platform and the benefits of pino-sanitize</h2>\n<blockquote>\n<p>This example is using <code class=\"language-text\">pino-sanitize</code> and it's focused on NodeJS. However, these concepts can be applied in any other language, tool, framework or platform.</p>\n</blockquote>\n<p>If you have an application using NodeJS you might be using <a href=\"https://getpino.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PinoJS</a>, a small a and very low overhead logger for NodeJS applications. It's quite fast, flexible and with a great documentation.</p>\n<p>In order to make this process smoothiest as possible by empowering the developers to have plug-and-play solutions to filter logs before transport the info into the logging platform used in your app, PinoJS supports transports.</p>\n<p>Transports on the pino package context is a tool that consumes the logs and maniputes the received input, returning a new output with your changes at the end. So I'm glad to share a new package called <a href=\"https://github.com/willmendesneto/pino-sanitize\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pino-sanitize</a>, a PinoJS transport package that sanitizes sensitive data, such as UUID, tokens, and hashes inside some log field.</p>\n<p>The usage is quite simple. For this example the package will be installed globally via NPM.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> pino-sanitize</code></pre></div>\n<p>After that, just need to add a pipe in your NodeJS script passing <code class=\"language-text\">pino-sanitize</code> and configure with the params that you should be removed from your logs.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> start <span class=\"token operator\">|</span> pino-sanitize</code></pre></div>\n<p>The accepted params that can be passed via CLI are</p>\n<ul>\n<li><code class=\"language-text\">--uuid</code> (<code class=\"language-text\">-u</code>): Filter log removing UUID (defaults to <code class=\"language-text\">false</code>).</li>\n<li><code class=\"language-text\">--hash</code> (<code class=\"language-text\">-h</code>): Filter log removing HASH (defaults to <code class=\"language-text\">false</code>).</li>\n<li><code class=\"language-text\">--qs</code> (<code class=\"language-text\">-q</code>): Filter log removing Query Strings (defaults to <code class=\"language-text\">false</code>).</li>\n<li><code class=\"language-text\">--keys</code> (<code class=\"language-text\">-k</code>): Define which keys should be sanitized (E.G. <code class=\"language-text\">-k err,msg</code>) (defaults to <code class=\"language-text\">err,error,msg,message</code>).</li>\n</ul>\n<p>As an example, let's create a file and add some sensitive data into your logs.</p>\n<p><div id=\"gist109250514\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\" data-color-mode=\"light\" data-light-theme=\"light\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container\">\n  <div id=\"file-pino-sanitize-example-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\"\n      class=\"Box-body p-0 blob-wrapper data type-javascript  \"\n      style=\"overflow: auto\" tabindex=\"0\" role=\"region\"\n      aria-label=\"pino-sanitize-example.js content, created by willmendesneto on 01:57AM on April 29, 2021.\"\n    >\n\n        \n<div class=\"js-check-hidden-unicode js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n    <span>\n      This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a class=\"Link--inTextBlock\" href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-path=\"pino-sanitize-example.js\">\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L1\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s>&#39;use strict&#39;</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L2\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L3\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>pino</span> <span class=pl-c1>=</span> <span class=pl-en>require</span><span class=pl-kos>(</span><span class=pl-s>&#39;pino&#39;</span><span class=pl-kos>)</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L4\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L5\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>uuid</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;fe35c68e-1648-40a5-8f3a-a7d5ae054261&#39;</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L6\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>hash</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;2cccdfbad40b872c6615c9721d14b904465a424e&#39;</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L7\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L8\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;hello world&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L9\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>error</span><span class=pl-kos>(</span><span class=pl-s>&#39;this is at error level&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L10\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;the answer is %d&#39;</span><span class=pl-kos>,</span> <span class=pl-c1>42</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L11\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>obj</span>: <span class=pl-c1>42</span> <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-s>&#39;hello world&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L12\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>obj</span>: <span class=pl-c1>42</span><span class=pl-kos>,</span> <span class=pl-c1>b</span>: <span class=pl-c1>2</span> <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-s>&#39;hello world&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L13\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>nested</span>: <span class=pl-kos>{</span> <span class=pl-c1>obj</span>: <span class=pl-c1>42</span> <span class=pl-kos>}</span> <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-s>&#39;nested&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L14\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>setImmediate</span><span class=pl-kos>(</span><span class=pl-k>function</span> <span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L15\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC15\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;after setImmediate&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L16\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L17\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"17\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>error</span><span class=pl-kos>(</span><span class=pl-k>new</span> <span class=pl-v>Error</span><span class=pl-kos>(</span><span class=pl-s>`an error with UUID: <span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>uuid</span><span class=pl-kos>}</span></span>`</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L18\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"18\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC18\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L19\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"19\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>var</span> <span class=pl-s1>child</span> <span class=pl-c1>=</span> <span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>child</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>a</span>: <span class=pl-s>`property <span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>uuid</span><span class=pl-kos>}</span></span>`</span> <span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L20\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"20\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>child</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;hello child!&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L21\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"21\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC21\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L22\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"22\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>var</span> <span class=pl-s1>childsChild</span> <span class=pl-c1>=</span> <span class=pl-s1>child</span><span class=pl-kos>.</span><span class=pl-en>child</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>another</span>: <span class=pl-s>&#39;property&#39;</span> <span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L23\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"23\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>childsChild</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;hello baby..&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L24\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"24\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC24\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L25\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"25\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>debug</span><span class=pl-kos>(</span><span class=pl-s>&#39;this should be mute&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L26\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"26\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC26\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L27\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"27\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-c1>level</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;trace&#39;</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L28\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"28\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC28\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L29\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"29\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC29\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>debug</span><span class=pl-kos>(</span><span class=pl-s>&#39;this is a debug statement&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L30\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"30\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC30\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L31\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"31\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC31\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>child</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>another</span>: <span class=pl-s>&#39;#property2&#39;</span> <span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>.</span><span class=pl-en>debug</span><span class=pl-kos>(</span><span class=pl-s>&#39;this is a debug statement via child&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L32\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"32\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC32\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>trace</span><span class=pl-kos>(</span><span class=pl-s>&#39;this is a trace statement&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L33\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"33\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC33\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L34\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"34\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC34\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>debug</span><span class=pl-kos>(</span><span class=pl-s>&#39;this is a &quot;debug&quot; statement with &quot;&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L35\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"35\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC35\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L36\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"36\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC36\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>&#39;hello world&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L37\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"37\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC37\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-pino-sanitize-example-js-L38\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"38\"></td>\n          <td id=\"file-pino-sanitize-example-js-LC38\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>pino</span><span class=pl-kos>.</span><span class=pl-en>info</span><span class=pl-kos>(</span><span class=pl-s>`API CALLED: www.test.com/<span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>uuid</span><span class=pl-kos>}</span></span>/user/:<span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>hash</span><span class=pl-kos>}</span></span>/7627?test=true with HTTP Status 200`</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/cd1e4b1e3ae28634b8ab25d00411ca39/raw/64c030c36b95231c9243cefb27d7df62e4fe68a0/pino-sanitize-example.js\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/cd1e4b1e3ae28634b8ab25d00411ca39#file-pino-sanitize-example-js\" class=\"Link--inTextBlock\">\n          pino-sanitize-example.js\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>if you have a file like this example here and run the command with the specified params. That's how easy it is to integrate <code class=\"language-text\">pino-sanitize</code> in your application.</p>\n<p><div id=\"gist109250657\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\" data-color-mode=\"light\" data-light-theme=\"light\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container\">\n  <div id=\"file-running-pino-sanitize-md\" class=\"file my-2\">\n      <div id=\"file-running-pino-sanitize-md-readme\" class=\"Box-body readme blob p-5 p-xl-6 \"\n    style=\"overflow: auto\" tabindex=\"0\" role=\"region\"\n    aria-label=\"running-pino-sanitize.md content, created by willmendesneto on 02:12AM on April 29, 2021.\"\n  >\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div class=\"highlight highlight-source-shell\" dir=\"auto\"><pre>node example.js <span class=\"pl-k\">|</span> pino-sanitize -u=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>:{UUID}<span class=\"pl-pds\">\"</span></span> -h=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>:{HASH}<span class=\"pl-pds\">\"</span></span> -q=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>:{QUERY-STRING}<span class=\"pl-pds\">\"</span></span> -k=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>err,msg,stack<span class=\"pl-pds\">\"</span></span></pre></div>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/85a77ac8d9f934123384bbaea7a74eba/raw/018c2c0cd8fca4ca3f0b49499a2b87ac656d7764/running-pino-sanitize.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/85a77ac8d9f934123384bbaea7a74eba#file-running-pino-sanitize-md\" class=\"Link--inTextBlock\">\n          running-pino-sanitize.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<hr />\n<p>So, at the end, this will be the output of your code. Your output won't have the sensitive data in your output. As you can see, there are no sensitive data added into your application logs 🎉🎉</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1648920605b8257d36e6d1c4a61d71c/29f2d/pino-sanitize-in-action.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.6875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACn0lEQVR42nWT23KbMBCG/RiZiesSsJHMQZxkDAYMmENsHDeduBd5lk7ivEcmt+0rtlM82q7IRdJOe/HNyivz6/9XMOpqax/G8TeLWc8aNV4UDSHWi/oOavsvBFH/6r/jWTe976pu70acW0+LdAMOz84mz4C6EcwsH7S5AyqiGS7MTG9Arv9DT50FKLr1OBqr9JEEawjTw89F0fVO0vZ+tuvNIO2nhtNrc9ar9BW5fsN5RfYp+zEcSOyvI0WnJ5ujYNyd41UFPC7BDnOw0C2xAtAoupy7/wATDHsIispUCrEfRhPdOBEvgqnNz3PGgTgcI3sw1nQYz+YYQ0KHekUkFIXmoON/KHNhajKQ7uXvyWz+MJpa7snJG2Dr4hxvKog2NSyzEoKsAJZkEGYprPIURxJBmMS4FwJfBWD5HorqeACBDxrpFd2AsTp7GBmMn/JqC0WzO28Pd9DdfoG82UHT3ULZdFDtDlB3nyEpWkira9zbwwrXcV6D4cqLMFDUwHnaMFZQkDL/VF7fQFZtz5vtAcrrPZTtHjbbG3y4wz6KtDtIymY4SFbZK9puYF1vce5ZH+cVvgkOClr+aV3vIFpvzrI5xI0zjJUP1Y9SWCQF1gycRQwmunLD1QDjMdYE44e9HUSgyBlKh9I+X63lKUKCDwpvmQiHYw2TYW0Hy6Eveygm8CBhuFzoliuI7f3SbbwUlcgZ+qcUY6yKuse4ou4+iaRoBMYS6FokZStwdiJMC7FMy6FKMXQm0KFAQ2JqsDdB3eVPvLkBv2rPaYmDT1sZAVmC6b1WxqOhJ2NJ0DHMnQBv2R3A2eGXEsgLehx9tCz6kbJ71WR3l5Or48XF1VHWy8n0D6aEHRlfHpm3PJoeP+L7N0BM7zij7E6l5r2iEPIbJM948rDO5zcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d1648920605b8257d36e6d1c4a61d71c/fb34c/pino-sanitize-in-action.avif 320w,\n/static/d1648920605b8257d36e6d1c4a61d71c/646cd/pino-sanitize-in-action.avif 768w,\n/static/d1648920605b8257d36e6d1c4a61d71c/8b485/pino-sanitize-in-action.avif 1024w,\n/static/d1648920605b8257d36e6d1c4a61d71c/a73d6/pino-sanitize-in-action.avif 1280w,\n/static/d1648920605b8257d36e6d1c4a61d71c/a7f9f/pino-sanitize-in-action.avif 1920w,\n/static/d1648920605b8257d36e6d1c4a61d71c/ec3fe/pino-sanitize-in-action.avif 3808w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/d1648920605b8257d36e6d1c4a61d71c/cb523/pino-sanitize-in-action.webp 320w,\n/static/d1648920605b8257d36e6d1c4a61d71c/cd067/pino-sanitize-in-action.webp 768w,\n/static/d1648920605b8257d36e6d1c4a61d71c/53334/pino-sanitize-in-action.webp 1024w,\n/static/d1648920605b8257d36e6d1c4a61d71c/4b075/pino-sanitize-in-action.webp 1280w,\n/static/d1648920605b8257d36e6d1c4a61d71c/f3ff0/pino-sanitize-in-action.webp 1920w,\n/static/d1648920605b8257d36e6d1c4a61d71c/1d53d/pino-sanitize-in-action.webp 3808w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d1648920605b8257d36e6d1c4a61d71c/d4f27/pino-sanitize-in-action.png 320w,\n/static/d1648920605b8257d36e6d1c4a61d71c/778aa/pino-sanitize-in-action.png 768w,\n/static/d1648920605b8257d36e6d1c4a61d71c/658fc/pino-sanitize-in-action.png 1024w,\n/static/d1648920605b8257d36e6d1c4a61d71c/26c69/pino-sanitize-in-action.png 1280w,\n/static/d1648920605b8257d36e6d1c4a61d71c/7d442/pino-sanitize-in-action.png 1920w,\n/static/d1648920605b8257d36e6d1c4a61d71c/29f2d/pino-sanitize-in-action.png 3808w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d1648920605b8257d36e6d1c4a61d71c/26c69/pino-sanitize-in-action.png\"\n            alt=\"Pino-Sanitize package in action: your logs won&#39;t have the sensitive data based on your configuration\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Pino-Sanitize package in action: your logs won&#39;t have the sensitive data based on your configuration</figcaption>\n  </figure></p>\n<hr/>\n<h3>That’s all for now</h3>\n<p>I hope you enjoyed this reading as much as I enjoyed writing it. Thank you so much for reading until the end and see you soon!</p>\n<p>🚀🚀🚀🚀🚀🚀</p>\n<hr />\n<h3>Cya 👋</h3>","frontmatter":{"date":"May 11, 2021","path":"/posts/sanitizing-sensitive-data-from-your-logs-with-pinojs-and-pino-sanitize/","title":"Sanitizing sensitive data from your logs with PinoJS and Pino-Sanitize","tags":["javascript","frontend","backend","js","tooling","architecture","security","logging"],"status":"active"},"timeToRead":4}},"pageContext":{"postPath":"/posts/sanitizing-sensitive-data-from-your-logs-with-pinojs-and-pino-sanitize/"}},"staticQueryHashes":["1271460761","63159454"],"slicesMap":{}}