{"componentChunkName":"component---src-templates-post-js","path":"/posts/decreasing-bundle-size-by-adding-package-conditional-entry-points-in-npm-packages","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3f659a68618bfb7f8602a78231c26da/e93f2/package-entrypoints.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.4375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXUlEQVQoz3VSwU7CQBTkrz0piXg1MYoU4sVE1ABRD96MJp44efCARg1ESiwtRMFtd9vdtrtjui1QSnzJ5G3nTSbzXlpCVkop3aWU4EKgyKddLXufSLzOJLpOvJwnKC0eSX0Oh3AmUwgh0B8MQJm/ZgoFyOx5Y0Zo9iMcvIj/DSlj4FwgjiU8jyII+CInSKjQGXBY3wTu7xzXPR/NZ4b6U7huWFw3DEO9chRFGZfOelOJyj2D+TWBbVtod12cProwHkTRcJXQNEcY2w4YY3h7/0DAs4RKgnGJ0VSA+VyfwpkLDWsWba6sjwPoVElCJSX8IEAcRyhWohSxShw2Z/mVVU6Q11LKYFljEEK0mdZpfXqOBPk/QRueXFFsVwn2GgS79RUqDRfl6g+29m3sVGf6e31OUK4RHJ578IPUVBt27nxNGm2KWsvLgWocX1IYLZrj0nnCHV14OLtlCHhq+AfPMKGrYqAy7gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a3f659a68618bfb7f8602a78231c26da/fb34c/package-entrypoints.avif 320w,\n/static/a3f659a68618bfb7f8602a78231c26da/646cd/package-entrypoints.avif 768w,\n/static/a3f659a68618bfb7f8602a78231c26da/8b485/package-entrypoints.avif 1024w,\n/static/a3f659a68618bfb7f8602a78231c26da/a73d6/package-entrypoints.avif 1280w,\n/static/a3f659a68618bfb7f8602a78231c26da/a7f9f/package-entrypoints.avif 1920w,\n/static/a3f659a68618bfb7f8602a78231c26da/0cf61/package-entrypoints.avif 3316w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/a3f659a68618bfb7f8602a78231c26da/cb523/package-entrypoints.webp 320w,\n/static/a3f659a68618bfb7f8602a78231c26da/cd067/package-entrypoints.webp 768w,\n/static/a3f659a68618bfb7f8602a78231c26da/53334/package-entrypoints.webp 1024w,\n/static/a3f659a68618bfb7f8602a78231c26da/4b075/package-entrypoints.webp 1280w,\n/static/a3f659a68618bfb7f8602a78231c26da/f3ff0/package-entrypoints.webp 1920w,\n/static/a3f659a68618bfb7f8602a78231c26da/71f3f/package-entrypoints.webp 3316w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a3f659a68618bfb7f8602a78231c26da/d4f27/package-entrypoints.png 320w,\n/static/a3f659a68618bfb7f8602a78231c26da/778aa/package-entrypoints.png 768w,\n/static/a3f659a68618bfb7f8602a78231c26da/658fc/package-entrypoints.png 1024w,\n/static/a3f659a68618bfb7f8602a78231c26da/26c69/package-entrypoints.png 1280w,\n/static/a3f659a68618bfb7f8602a78231c26da/7d442/package-entrypoints.png 1920w,\n/static/a3f659a68618bfb7f8602a78231c26da/e93f2/package-entrypoints.png 3316w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a3f659a68618bfb7f8602a78231c26da/26c69/package-entrypoints.png\"\n            alt=\"package entrypoints\"\n            title=\"package entrypoints\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2>Introduction</h2>\n<p>Among the evolution or large codebases, concerns about performance are always raised. That might be by different techniques: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dynamic async imports</a>, defining <a href=\"https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Critical Resource, Critical Path Length and Critical Bytes</a>, lazy loading images via <a href=\"https://web.dev/lazy-loading-images/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">libraries</a> or by <a href=\"https://web.dev/browser-level-image-lazy-loading/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">using the browser-level image lazy-loading support</a> and so on and so forth.</p>\n<p>Even though these are quite good ideas, having application performance boost as final results, it's usually done on the application side. If you're using design system and javascript libraries you should also care about their bundle sizes.</p>\n<blockquote>\n<p>Some of these points were covered on <a href=\"https://willmendesneto.com/posts/solving-a-problem-is-more-than-just-adding-a-new-dependency\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">\"Solving a problem is more than just adding a new dependency\"</a> post. The intention of this post is specifically to show you how to integrate entry points in your NPM Packages.</p>\n</blockquote>\n<h3>The problem with large Javascript bundle size</h3>\n<p>Even with the advent of HTTP2, prefetch, preload and parallelization, content minified, uglified and compressed, the bundle issue still persists. The bright side of it is that's a common solution and there are several ways to solve that.</p>\n<p>For some applications this is more than enough, covering several scenarios that might affect the performance of your app. However, these approaches are focused on the file after-bundle procress, not covering usage before-bundle.</p>\n<p>For scenarios like libraries, frameworks or design systems, having several components being shared across multiples pages and components of your project is a huge problem. Even having tree-shaking suport for your bundler, the algorithm is not covering all the cases.</p>\n<p>For example, if you have a design system on the namespace <code class=\"language-text\">@myapp/</code> and you have a button which imports some icons, you'll ending up having <code class=\"language-text\">@myapp/buttons</code> and <code class=\"language-text\">@myapp/icons</code> in your dependencies. Also, if your build distribution is sharing only CommonJS, you might have all the buttons and icons. And it's even worse, because CommonJS not tree-shakable! ðŸ˜±</p>\n<p>To ilustrate this scenario, let's imagine you have 2 components in your <code class=\"language-text\">@myapp/buttons</code> package. From now on you'll have <code class=\"language-text\">Button</code> and <code class=\"language-text\">ButtonWithIcon</code> and there are several components inside <code class=\"language-text\">@myapp/icons</code> -  it can be more than 30 components, for example.</p>\n<p><div id=\"gist108921521\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-first-app-structure-md\" class=\"file my-2\">\n      <div id=\"file-first-app-structure-md-readme\" class=\"Box-body readme blob js-code-block-container p-5 p-xl-6 \">\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><pre><code>node_modules/\n  @myapp/\n    buttons/index.js &lt;-- final button with all components, even if you're using only 1 of them\n    icons/index.js &lt;-- final bundle with all icons, even the ones you're not using\n</code></pre>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/4790ece61053fbbcd00f121e6cdb4313/raw/b401acf8e0251cd1a4fe190dda4b8c65e955c9b5/first-app-structure.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/4790ece61053fbbcd00f121e6cdb4313#file-first-app-structure-md\" class=\"Link--inTextBlock\">\n          first-app-structure.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Even knowing I'm using a single button and a single icon, how can I solve the problem of have all these unused components on the final bundle of my project?</p>\n<h3>Distributing ESM and CommonJS in your bundles to have tree-shaking support</h3>\n<p>First of all, you should make sure that all your components are having <em>at least</em> CommonJS and ESM in your bundle distribution. So that you can expose the different bundles in your <code class=\"language-text\">package.json</code>. ESM will be exposed on <code class=\"language-text\">modules</code> and commonjs will be exposed on <code class=\"language-text\">main</code> fields, respectively.</p>\n<p>In a 100% ESM module world, identifying side effects is an easy job. However, we aren't there just yet, so in the mean time it's necessary to provide hints to webpack's compiler on the \"pureness\" of your code.</p>\n<blockquote>\n<p>If you want to know more about side-effects, why they're required and the impact in your app, please read the <a href=\"https://webpack.js.org/guides/tree-shaking/#mark-the-file-as-side-effect-free\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Webpack's tree-shaking docs page</a></p>\n</blockquote>\n<p>With all these changes in place, the first version of your <code class=\"language-text\">package.json</code> will be like that.</p>\n<p><div id=\"gist108921552\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-exposing-esm-file-package-ison-md\" class=\"file my-2\">\n      <div id=\"file-exposing-esm-file-package-ison-md-readme\" class=\"Box-body readme blob js-code-block-container p-5 p-xl-6 \">\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div class=\"highlight highlight-source-json\" dir=\"auto\"><pre>{\n  <span class=\"pl-ii\">...</span>\n  <span class=\"pl-ent\">\"sideEffects\"</span>: <span class=\"pl-c1\">false</span>,\n  <span class=\"pl-ent\">\"name\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>@myapp/buttons<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"main\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../dist/cjs/index.js<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"module\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../dist/esm/index.js<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"cjs\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../dist/cjs/index.js<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ii\">...</span>\n}</pre></div>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/85aa95888267e6c889a36850dda82b82/raw/ee90efd4f84da35f477201dfd670414ec0681691/exposing-esm-file-package-ison.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/85aa95888267e6c889a36850dda82b82#file-exposing-esm-file-package-ison-md\" class=\"Link--inTextBlock\">\n          exposing-esm-file-package-ison.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Now it's time to have all the benefits of tree-shaking and reduce the bundle size of your app.</p>\n<h3>Code-Splitting and taking advantage of tree-shaking by reduce bundle size</h3>\n<p>Your <code class=\"language-text\">@myapp/buttons</code> package will have the build distribution organized that way.</p>\n<p><div id=\"gist108921570\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-build-structure-with-cjs-and-esm-md\" class=\"file my-2\">\n      <div id=\"file-build-structure-with-cjs-and-esm-md-readme\" class=\"Box-body readme blob js-code-block-container p-5 p-xl-6 \">\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><pre><code>@myapp/\n  buttons/\n    cjs/index.js &lt;-- final button with all components, even if you're using only 1 of them\n    esm/\n      ButtonWithIcon.js   &lt;-- `ButtonWithIcon` component\n      Button.js           &lt;-- `Button` component\n      index.js            &lt;-- main file exporting both components\n</code></pre>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/7cacd4cef0a978a4b3193159dc6642e2/raw/377c9538f17f1d2effe578a28398e2b979af36f6/build-structure-with-cjs-and-esm.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/7cacd4cef0a978a4b3193159dc6642e2#file-build-structure-with-cjs-and-esm-md\" class=\"Link--inTextBlock\">\n          build-structure-with-cjs-and-esm.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Your bundler will try to use ESM before CommonJS in order to avoid bundle increase. So it knows if your package has any ESM bundle by checking <code class=\"language-text\">module</code> field in your <code class=\"language-text\">package.json</code>.</p>\n<p>You can notice that if you import the package using <code class=\"language-text\">import Button from '@myapp/buttons/esm/Button.js</code> that will work.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d8420a51f1dab65830ddc274c3ef67e/45a5e/however.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.187499999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQY0x2QXUtaAQCGz69pmBppI6u/0PCcMz/qMnZtEEQXNgpWyWpgXxtNI7KMKCGoCyXnFFoXllQGS9paI8KsVNo8lHiOdvFsevfyvFfPI5SdL1FsJh5tJsqSgWxPFw/2NhSphdLrVkpSC0V7GzmnhfveTsqSkZLNTM7RTr6ng0KdO9tRRT0VhxnhzmkhNefhcOot8YVpkuvL3G34OfF72Q985iToI7oW4DAa4TS0yo+PE3zxjpOIhMnshPjmmyUV20X5MIgm6hFuZDMHia9cnH3nOHNObu0Te8ElfqaSZH5dcn2f5zQaJn15RXbBQzq8ze/0Ecl4jItUkv3VRc5vblF2glS7mxDqWoWpIfJjLsqefgq+9+RDSygukb/zo5Sm3Ty4+8htraDMj/Bn+A3qrJvsOxfF8CbZmRGe/B60yQFU2YigOUxokh5NMjQ61MRmnsVmVMmAZtWhWnWNr86r9tbGrlh1VGUDtTqXjVRevaAiG1H/N/wHJt8XdQwL4dYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7d8420a51f1dab65830ddc274c3ef67e/fb34c/however.avif 320w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/646cd/however.avif 768w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/8b485/however.avif 1024w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/a73d6/however.avif 1280w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/c7b6c/however.avif 1546w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/7d8420a51f1dab65830ddc274c3ef67e/cb523/however.webp 320w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/cd067/however.webp 768w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/53334/however.webp 1024w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/4b075/however.webp 1280w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/32645/however.webp 1546w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7d8420a51f1dab65830ddc274c3ef67e/d4f27/however.png 320w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/778aa/however.png 768w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/658fc/however.png 1024w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/26c69/however.png 1280w,\n/static/7d8420a51f1dab65830ddc274c3ef67e/45a5e/however.png 1546w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7d8420a51f1dab65830ddc274c3ef67e/26c69/however.png\"\n            alt=\"It is always a good to keep in mind that every choice has pros, but also have cons\"\n            title=\"It is always a good to keep in mind that every choice has pros, but also have cons\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">It is always a good to keep in mind that every choice has pros, but also have cons</figcaption>\n  </figure></p>\n<p>However, this is not ideal since you're coupling your app with the internal code structure of your dependency. This will raise massive issues with common tasks, such as update a package dependecy.</p>\n<p>Now that your application knows too much about the dependency directories, that might also implies breaking changes in case of dependency structure changes as well. In summary, it means that if for some reason the build distribution was changed and now it's in <code class=\"language-text\">@myapp/buttons/dist/esm/Button.js</code> you have a broken app!</p>\n<blockquote>\n<p>You should not access your dependency directories directly, unless it's something <em>extremelly</em> necessary. A small change in your dependencies and your app might be broken</p>\n</blockquote>\n<p><div id=\"gist108921578\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-breaking-changes-because-the-package-structure-changed-md\" class=\"file my-2\">\n      <div id=\"file-breaking-changes-because-the-package-structure-changed-md-readme\" class=\"Box-body readme blob js-code-block-container p-5 p-xl-6 \">\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><pre><code>@myapp/\n  buttons/\n    # Oops! Your app will face the consequences\n    dist/\n      cjs/index.js\n      esm/\n        ButtonWithIcon.js   \n        Button.js           \n        index.js            \n</code></pre>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/f10a675c29dc89c79f1c12d794bb9285/raw/82abcd8cf7172666dba2ae08827aa34fc9154978/breaking-changes-because-the-package-structure-changed.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/f10a675c29dc89c79f1c12d794bb9285#file-breaking-changes-because-the-package-structure-changed-md\" class=\"Link--inTextBlock\">\n          breaking-changes-because-the-package-structure-changed.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Package Conditional Exports and Creating Declarative Entry-Points in your package.json</h3>\n<p>Let's make a quick recap before jump in this topic. Now we know that ESM is a tree-shakable distribution format and we can have the benefits by using it. We also know that we shouldn't access the package files directly by navigating through the dependency structure.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7f1deb558c80ea76bb5067053a7d2351/ba0a7/main-concerns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTklEQVQ4y61TW06DQBRlu12D7qF/uoJ2CX6h8dP0ZS1gn0JJh/KGAYGUWjiGaTDUjEmbepOTm3tz5uS+RkDDyrJknlIKQgiiKILv+yx2XZehivM8P+E3TeAJVg8VRYEsy5AkCaPRiGE8HjPved55gn+RePYXTyjKAkVZMkKNojiNj7niB3WuFm6KC7jCuC13tA6mwRyut4fhJHCDDMRK4NMMlIbIsgxhGLLFxHGMIAjYDNM05Vd4+3aDh/UjFssUA9lGX3Lw9GLgQw+xNQhs28ZqtYKmaVBVlfkqrhbHFdQTHek++b+WW/0WuvMu1KmGwbAHTbfw3NtiqDiMcGgs4Te4FU6CCdzdsfz6YL8O/ErOOSnhfnkHcS3CMRyYlonZbAZCNljqFK/vLsJod9F9Cu1pG+JGRORFsGwLpmmygRPrEwuNIk7yywSv+RU8wW8+v+59gY5gCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7f1deb558c80ea76bb5067053a7d2351/fb34c/main-concerns.avif 320w,\n/static/7f1deb558c80ea76bb5067053a7d2351/646cd/main-concerns.avif 768w,\n/static/7f1deb558c80ea76bb5067053a7d2351/8b485/main-concerns.avif 1024w,\n/static/7f1deb558c80ea76bb5067053a7d2351/a73d6/main-concerns.avif 1280w,\n/static/7f1deb558c80ea76bb5067053a7d2351/8c45f/main-concerns.avif 1792w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/7f1deb558c80ea76bb5067053a7d2351/cb523/main-concerns.webp 320w,\n/static/7f1deb558c80ea76bb5067053a7d2351/cd067/main-concerns.webp 768w,\n/static/7f1deb558c80ea76bb5067053a7d2351/53334/main-concerns.webp 1024w,\n/static/7f1deb558c80ea76bb5067053a7d2351/4b075/main-concerns.webp 1280w,\n/static/7f1deb558c80ea76bb5067053a7d2351/7cc8d/main-concerns.webp 1792w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7f1deb558c80ea76bb5067053a7d2351/d4f27/main-concerns.png 320w,\n/static/7f1deb558c80ea76bb5067053a7d2351/778aa/main-concerns.png 768w,\n/static/7f1deb558c80ea76bb5067053a7d2351/658fc/main-concerns.png 1024w,\n/static/7f1deb558c80ea76bb5067053a7d2351/26c69/main-concerns.png 1280w,\n/static/7f1deb558c80ea76bb5067053a7d2351/ba0a7/main-concerns.png 1792w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7f1deb558c80ea76bb5067053a7d2351/26c69/main-concerns.png\"\n            alt=\"Some of the main concerns when using Package Entry-Points\"\n            title=\"Some of the main concerns when using Package Entry-Points\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Some of the main concerns when using Package Entry-Points</figcaption>\n  </figure></p>\n<p>Keeping these points in mind, one way to solve is by using an entrypoint structure. Entry-points is a way to expose a specific function, class or component intentionally to be consumed to your users. So that, the consumers can only import a specific piece of code instead of all the functions of the used dependency, enabling bundle decrease and having a better understanding of what's being used in your app.</p>\n<p>This architecture is called <a href=\"https://nodejs.org/docs/latest-v12.x/api/packages.html#packages_conditional_exports\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">\"Package Conditional Exports\"</a> - AKA \"Package Entry-Points\" - and some packages such as lodash and others are using this technique to decouple their functions, so their consumers can export only what's needed for them.</p>\n<p>The idea here is to install all the package functions, but delay the decision of which function is required on development time. On lodash case, it add some benefits. So it won't be needed to install <code class=\"language-text\">lodash.compact</code>, <code class=\"language-text\">lodash.debounce</code> and other packages one by one since you can access them via entry-points via <code class=\"language-text\">lodash/compact</code> and <code class=\"language-text\">lodash/debounce</code>, respectively.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8074d2424d22cb4f528c0a79891b915/2de51/lodash-entrypoints.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACxElEQVQ4y42PWU8TURhAJ8FpNWiX6UxnugAKBlBRo2/GuJOoRMODL4ox4gLu0YgaUeMSjaIEMCqIZWmlLB3aEYFuoIYWNP6sY2ZKSXzSh5Nvufc7373CZGYREz2d5+uP33T0x7jz4iP3Xn3icVeYrsE4T7ojtL8eoP31IPc7Bqx6Ipkjnl2iOF9EMJvFg8TcTyLGPP3js/SPJ/kwMk3PsMG7yJSV943OEIql6I1OE0sVhPHMIkWHiZBYbuqpHHpygXgmTyK7iJFdtGIik7dyY25ppWfmemqBWHLBmjFnTYfpEibTOSaXt02k8sRmCheL6Mm/65V+Koc5a0pMzAXmY4R4Ok93KMqxhkYajzdwsLGBPfVH2Hvo8D/ZV3+U3fvrOXn2IqNT85ZUMF9w93kndZLMgVon7h1OSkpXI5aIiDYbq2x2SkQ7os2OKIoFbDYr2ux2BEGgelMdgxPTjM98R4hOzXH38Us8XgVfQEX1KkiqHzlYgaQFUDUv/oCK5FXxBMotJF8QT6AC2V/GWoeTLdt38iGsY7qEz4kMt9qf4VUVNlb58PkUJH8ZSmUNbl8ZqiZTUa7ilFXk9dXI5ZXL57XI5VWsc7rYtHU7PaFRRowsQiSR5ub9pyvCYFBD8XrxBNejbKhG8pXhUVQqN2hommwt8VbVIGl+3JLEmtJSauu20ROKFoQjX7K0PXqBS3KjaRKSx43D5cahaDi1AA7Jg8PlQlbcuCQXayUZlxZgnbvQF+12ajfv4P1QjOgXU2hk6f40wtW2B5xpvcHp81doOneZpuZWmppbaDp3yapPNRfiabNubrHimZZrXLh2m7aXD+kbizH29TvC2PQ3hvVZ+qMGb0OjdPaFedM7/B8M0d0XpTPykRMdu7jZ20ois4Sgp3OMz/yw/h+OpxjWk9aCfzGkzxKeTDOQMLjee57OeBdG5hd/AHiFWjcmR51qAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f8074d2424d22cb4f528c0a79891b915/fb34c/lodash-entrypoints.avif 320w,\n/static/f8074d2424d22cb4f528c0a79891b915/646cd/lodash-entrypoints.avif 768w,\n/static/f8074d2424d22cb4f528c0a79891b915/8b485/lodash-entrypoints.avif 1024w,\n/static/f8074d2424d22cb4f528c0a79891b915/a73d6/lodash-entrypoints.avif 1280w,\n/static/f8074d2424d22cb4f528c0a79891b915/3c806/lodash-entrypoints.avif 1848w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/f8074d2424d22cb4f528c0a79891b915/cb523/lodash-entrypoints.webp 320w,\n/static/f8074d2424d22cb4f528c0a79891b915/cd067/lodash-entrypoints.webp 768w,\n/static/f8074d2424d22cb4f528c0a79891b915/53334/lodash-entrypoints.webp 1024w,\n/static/f8074d2424d22cb4f528c0a79891b915/4b075/lodash-entrypoints.webp 1280w,\n/static/f8074d2424d22cb4f528c0a79891b915/ab20a/lodash-entrypoints.webp 1848w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f8074d2424d22cb4f528c0a79891b915/d4f27/lodash-entrypoints.png 320w,\n/static/f8074d2424d22cb4f528c0a79891b915/778aa/lodash-entrypoints.png 768w,\n/static/f8074d2424d22cb4f528c0a79891b915/658fc/lodash-entrypoints.png 1024w,\n/static/f8074d2424d22cb4f528c0a79891b915/26c69/lodash-entrypoints.png 1280w,\n/static/f8074d2424d22cb4f528c0a79891b915/2de51/lodash-entrypoints.png 1848w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f8074d2424d22cb4f528c0a79891b915/26c69/lodash-entrypoints.png\"\n            alt=\"Entry points: Lodash example\"\n            title=\"Entry points: Lodash example\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Entry points: Lodash example</figcaption>\n  </figure></p>\n<p>On the case of our <code class=\"language-text\">@myapp/buttons</code>, we can achieve the same idea by exposing entry-points in folders on the root project. Each folder will have a <code class=\"language-text\">package.json</code> with the specified configuration for it. This is great for your app and avoids breaking changes in case of code structure.</p>\n<p>Even though this solves the problem, have a robust way to expose a set of functions if needed is something that's always useful. To have that in place easily, we can create a folder called <code class=\"language-text\">entrypoints</code>. The folder will have the entrypoints defined by files and, more than this, by features.</p>\n<p>If you need a specific entry point to expose more than 1 component, that can be done easily by the file. In this case, 2 new components were added in <code class=\"language-text\">@myapp/buttons</code>: <code class=\"language-text\">ButtonGroup</code> and <code class=\"language-text\">ButtonTheme</code>.</p>\n<p>Instead of creating a entry-point for each of the files, a new entry-point calledn <code class=\"language-text\">@myapp/buttons/utils</code> was created, giving the choice of export each of them to the app consumer.</p>\n<p><div id=\"gist108921592\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-utils-entrypoint-example-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a class=\"Link--inTextBlock\" href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JavaScript\" data-tagsearch-path=\"utils-entrypoint-example.js\">\n        <tr>\n          <td id=\"file-utils-entrypoint-example-js-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-utils-entrypoint-example-js-LC1\" class=\"blob-code blob-code-inner js-file-line\">// `./entrypoints/utils.js` file content</td>\n        </tr>\n        <tr>\n          <td id=\"file-utils-entrypoint-example-js-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-utils-entrypoint-example-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">// Accessed via `@myapp/butons/utils` entry-point</td>\n        </tr>\n        <tr>\n          <td id=\"file-utils-entrypoint-example-js-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-utils-entrypoint-example-js-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-utils-entrypoint-example-js-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-utils-entrypoint-example-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">export * from &#39;../ButtonGroup&#39;;</td>\n        </tr>\n        <tr>\n          <td id=\"file-utils-entrypoint-example-js-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-utils-entrypoint-example-js-LC5\" class=\"blob-code blob-code-inner js-file-line\">export * from &#39;../ButtonTheme&#39;;</td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/fc59e6e69cdba23c4ec12fcc7555f97a/raw/76d0693648377e544d78607948801e79d5c36c03/utils-entrypoint-example.js\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/fc59e6e69cdba23c4ec12fcc7555f97a#file-utils-entrypoint-example-js\" class=\"Link--inTextBlock\">\n          utils-entrypoint-example.js\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Based on that specific case, the package json inside of <code class=\"language-text\">@myapp/buttons/utils</code> folder will be</p>\n<p><div id=\"gist108921598\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-package-json\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-json  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a class=\"Link--inTextBlock\" href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JSON\" data-tagsearch-path=\"package.json\">\n        <tr>\n          <td id=\"file-package-json-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-package-json-LC1\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-package-json-LC2\" class=\"blob-code blob-code-inner js-file-line\">  ...</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-package-json-LC3\" class=\"blob-code blob-code-inner js-file-line\">  &quot;name&quot;: &quot;@myapp/buttons/utils&quot;,</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-package-json-LC4\" class=\"blob-code blob-code-inner js-file-line\">  &quot;main&quot;: &quot;../dist/cjs/entrypoints/utils.js&quot;,</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-package-json-LC5\" class=\"blob-code blob-code-inner js-file-line\">  &quot;module&quot;: &quot;../dist/esm/entrypoints/utils.js&quot;,</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-package-json-LC6\" class=\"blob-code blob-code-inner js-file-line\">  &quot;cjs&quot;: &quot;../dist/cjs/entrypoints/utils.js&quot;,</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-package-json-LC7\" class=\"blob-code blob-code-inner js-file-line\">  ...</td>\n        </tr>\n        <tr>\n          <td id=\"file-package-json-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-package-json-LC8\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/22594cb79f8fe89b7769e502ebb1ac92/raw/c9e3b64bb6ff3fda6cfa9c2fce076e3724bef20c/package.json\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/22594cb79f8fe89b7769e502ebb1ac92#file-package-json\" class=\"Link--inTextBlock\">\n          package.json\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>With these changes applied, that will be the structure of your package, supporting entry-points ðŸ¤˜ðŸ¤˜ðŸ¤˜ðŸ¤˜</p>\n<p><div id=\"gist108921609\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-final-structure-with-entry-points-md\" class=\"file my-2\">\n      <div id=\"file-final-structure-with-entry-points-md-readme\" class=\"Box-body readme blob js-code-block-container p-5 p-xl-6 \">\n    <article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><pre><code>@myapp/\n  buttons/\n    entrypoints/\n      utils.js &lt;-- Exporting `ButtonGroup` and `ButtonTheme` components\n      ButtonWithIcon.js &lt;-- Exporting `ButtonWithIcon` component\n      Button.js         &lt;-- Exporting `Button` component\n    ButtonGroup.js   \n    ButtonTheme.js   \n    ButtonWithIcon.js   \n    Button.js           \n    index.js\n</code></pre>\n</article>\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/beaf9b570766245d3ca3d64372bc2a77/raw/cd53cfbe6704de6bba0573a7c79191ae090cde71/final-structure-with-entry-points.md\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/beaf9b570766245d3ca3d64372bc2a77#file-final-structure-with-entry-points-md\" class=\"Link--inTextBlock\">\n          final-structure-with-entry-points.md\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<hr/>\n<h3>Better Entry-Points support on NPM in a near future</h3>\n<p>As you might have noticed, entry-points are a massive help to decrease the bundle of your application, giving your more flexibility in your app, being easy to integrate - and also to remove, having a massive role in other performance initiatives, such as code-splitting, if necessary.</p>\n<p>A lot of heavy-used packages are using it such as <a href=\"https://date-fns.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">date-fns</a>, <a href=\"https://lodash.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Lodash</a> and Design Systems such as <a href=\"https://atlaskit.atlassian.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Atlaskit</a> are also using it - ðŸ¤© I'm really glad to add the <a href=\"https://bitbucket.org/atlassian/atlaskit-mk-2/pull-requests/3639/code-splitting-components-and-exposing/diff\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">first support for entry-points in this Design System</a>, in specific ðŸ¤© - , having huge performance gains before-bundle and before deployment to production.</p>\n<p>This technique is getting so much traction that a even better way to integrate them into your app is being defined by NPM. And - spoiler alert - the support will be built-in, in your <code class=\"language-text\">package.json</code>.</p>\n<hr/>\n<blockquote>\n<p>You can find more details about <code class=\"language-text\">Package Conditional Exports</code> on <a href=\"https://nodejs.org/docs/latest-v12.x/api/packages.html#packages_conditional_exports\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">\"Modules: Packages\" NPM Documentation page</a></p>\n</blockquote>\n<hr/>\nI encourage you to see all of these steps in action by using [perf-marks entry-points](https://github.com/willmendesneto/perf-marks#entrypoints) in your application. It's a cross-platform performance measurement package powered by User Timing API and it has a simple and straightforward usage.\n<hr/>\n<blockquote>\n<p>You can find more details about Perf-Marks on <a href=\"https://willmendesneto.com/posts/cross-platform-performance-measurements-with-user-timing-apiand-perf-marks/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">\"Cross-platform performance measurements with User Timing API and perf-marks\"</a> post.</p>\n</blockquote>\n<hr/>\n<h3>Thatâ€™s all forÂ now</h3>\n<p>I hope you enjoyed this reading as much as I enjoyed writing it. Thank you so much for reading until the end and see you soon!</p>\n<hr />\n<h3>Cya ðŸ‘‹</h3>","frontmatter":{"date":"April 01, 2021","path":"/posts/decreasing-bundle-size-by-adding-package-conditional-entry-points-in-npm-packages","title":"Decreasing bundle size by adding Package Conditional Entry Points in NPM Packages","tags":["frontend","nodejs","npm","javascript","tip","js","tooling","performance"]},"timeToRead":12}},"pageContext":{}},"staticQueryHashes":["1559850390","63159454"]}