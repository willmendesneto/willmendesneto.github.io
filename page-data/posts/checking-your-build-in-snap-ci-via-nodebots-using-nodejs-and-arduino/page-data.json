{"componentChunkName":"component---src-templates-post-js","path":"/posts/checking-your-build-in-snap-ci-via-nodebots-using-nodejs-and-arduino/","result":{"data":{"markdownRemark":{"html":"<p>The idea of this post is share some basic concepts about open hardware usage and management using Javascript.</p>\n<p>When we start with the contact with <a href=\"https://www.arduino.cc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arduino</a> for example, the most common example is blink the led. But this time I will show a more atractive approach based in models like Hubot e Retaliation to check our build pipeline and validate our application healthy using <a href=\"https://www.arduino.cc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arduino</a> + NodeJS + <a href=\"https://johnny-five.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Johnny-Five</a> in a <a href=\"https://nodebots.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NodeBots</a> introduction.</p>\n<blockquote>\n<p>If you like to know more about Nodebots, please check my book <a href=\"https://leanpub.com/nodebots-javascript-and-robotic-in-the-real-world\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">“Nodebots — Javascript and robotic in the real world”</a></p>\n</blockquote>\n<h3>Build pipeline</h3>\n<p>In some presentations I realize that this terminology is not common for lots of people, even those most familiar with continous integration or continuous deployment. Build pipeline is a concept created in 2005 based in the task paralelization, splitting each step by small application acceptance criterias. It’s nice to know that these steps can be happening manually or automatically.</p>\n<p>An example of freemium service that use this concept by default is <a href=\"https://snap-ci.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Snap-CI</a>, that gives plenty facilities, a good programming languages support, deployment and other cool features.</p>\n<p>There’s a github repository example with <a href=\"https://snap-ci.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Snap-CI</a> integration for our build-checker project. After some initial configuraitons (this step is really simple) you can verify our latest build in notifications tab.</p>\n<h3>NodeBots</h3>\n<p>Nodebots is a concept based in the union of Javascript and robotic, possible because the advent of NodeJS, that makes the javascript popular beyond the browsers (such as in fridges, micro controllers, etc) and node-serialport package, created by Chris Williams, enabling hardware control via javascript.</p>\n<h3>Arduino</h3>\n<p><a href=\"https://www.arduino.cc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arduino</a> is a open-source platform (hardware and software) that is really easy to use. With that one, is anybody is able to make hardware/eletronic interactions in a different ways or do whatever you want.</p>\n<p>Some advantages:</p>\n<ul>\n<li>Cost: the arduino amount is less than $50;</li>\n<li>Cross-platform: Arduino is a open-source platform, compatible with all existent SO’s;</li>\n<li>Easy: It’s no necessary a bigger eletronic knowledgment. If you have basic ideas and know how to develop a simple code, it’s enought (after the first step you have to learn, of course) and you can do cool things with that one!</li>\n</ul>\n<p>Based in these characteristics let’s talk about our <a href=\"https://nodebots.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NodeBots</a> introduction project with the <a href=\"https://github.com/willmendesneto/build-checker\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">build-checker</a>.</p>\n<h3>Build checker: the project</h3>\n<p>The project was based in CCMenu, a project created by the ThoughtWorker Erik Doernenburg to check and shows the status of a specific project in a continuous integration server.</p>\n<p>In our case let’s use something physic, with open hardware and NodeJS. Our application will consume a XML with responsed information by the <a href=\"https://snap-ci.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Snap-CI</a> and we will check the current application status, using Arduino and leds for let us know that something wrong is happening with our build and we have to fix ASAP.</p>\n<p>Firstly we need to install NodeJS in our PC/laptop/computational device. For do this you can take a look in NodeJS project website, for example.</p>\n<p>The next step is install the Arduino IDE. After installation, try access: Options > Files > Exaples > StandardFirmata.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*LpdkXAyM5noDw1hX.png\" alt=\"\"></p>\n<p>With the arduino plugged in our laptop, we will run this specific code and wait for the IDE display the success message.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*RO6rCQjS-1xFimEw.png\" alt=\"\"></p>\n<p>Now is time of our build checker. For do this we will use the <a href=\"https://johnny-five.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Johnny-Five</a> package. The code is really simple.</p>\n<p>As I said before, you can be really familiar with the Johnny-Five’s interface. It has board.on(‘ready’) event, for example, that is similar of jQuery $(document).ready(). With all environment configured, let’s start based in this event, right? We need to plug 2 leds: 1 red (for display when build is broken) and 1 green (for display when the build is fine). We will put the success build in port number 12 + GND (ground) port and use the port number 10 + GND (ground) for display when our build is correct in our arduino as you can take a look in the image.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*gP2oYx-uKfRaaXhJ.png\" alt=\"\"></p>\n<p>Now we will create the request for consume the content via HTTP GET status in <a href=\"https://snap-ci.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SNAP-CI</a>, our continuous integration service, that uses the build pipeline, a really interesting concept; About the pros, this approach give a fast feedback for the developers (async or sync) and definition of all build based in steps. <a href=\"http://www.martinfowler.com/articles/continuousIntegration.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">If you like to know more about it, please access this link</a>.</p>\n<p>Let’s access SNAP-CI website, do the login (if you don’t have account there, it’s really fast =) ) and add a project.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*YMjBkyvxMN-kk7BR.png\" alt=\"\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*Rm87PU4f3BPmn3sm.png\" alt=\"\"></p>\n<p>When you add the project it will display a field with “CCTray” name that, when clicked, makes a redirect for the XML file with all build informations.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*OTXIfnfsNGKY4EkV.png\" alt=\"\"></p>\n<p>The .xml will be like that one.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*LFbkVndGDIYzD4lo.png\" alt=\"\"></p>\n<p>The Build Checker will check the data in a poller of 500 miliseconds, previewed configured and validating the current state of the build pipeline. If the response contains “Success” in the response, something wrong is happening and our build checker will blink the red led, otherwise the green led will be lighter and that’s all fine!</p>\n<p>If you like to take a look in the final result, just run the commands</p>\n<p>$ npm install # instala todas as dependências do projeto\n$ node index.js # roda o código do build checker</p>\n<p>And if you like to know more about the project, <a href=\"https://github.com/willmendesneto/build-checker\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">visit the github Build-Checker project</a>. The code is open-source, so feel free to give me some feedback, suggestions for constructive feedback (and github stars are always welcome). This project was based in <a href=\"https://www.youtube.com/watch?v=1EGk2rvZe8A\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Relatiation</a> project, by github to validate the Jenkins build status and give some “special feedback” for the team member. Watch this video and take a look how retaliation works.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*nIKkgUPqkrTonwYU.jpg\" alt=\"\"></p>\n<hr/>\n<h3>Conclusion</h3>\n<p>This project is a quickly NodeBots]<a href=\"https://nodebots.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nodebots</a> introduction, using the most simplest arduino example, that is the blink code (if you are interested, google it for “blink” or access the Arduino examples). This blink example is something totally didatic, but using NodeJS we realized all the power that we have using some concepts combined with the most classic arduino example … and the next steps are yours!</p>\n<p>What are you doing using <a href=\"https://nodebots.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NodeBots</a>, Javascript and/or Arduino? Share your experiences!</p>\n<p>After write this post and share in the social networks, I receive some good feedback and <a href=\"https://twitter.com/rwaldron\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Rick Waldron</a>, creator of <a href=\"https://johnny-five.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">johnny-five</a> package, send this message to me.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/0*OEaFMWiyLFrfkZRE.jpeg\" alt=\"\"></p>\n<p>That was really amazing! Thanks <a href=\"https://twitter.com/rwaldron\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Rick Waldron</a>!</p>\n<p>Links:</p>\n<ul>\n<li>Build Checker: <a href=\"http://github.com/willmendesneto/build-checker\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://github.com/willmendesneto/build-checker</a></li>\n<li>Johnny-Five: <a href=\"http://johnny-five.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://johnny-five.io/</a></li>\n<li>SNAP-CI: <a href=\"https://snap-ci.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://snap-ci.com/</a></li>\n<li>Arduino: <a href=\"https://www.arduino.cc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.arduino.cc/</a></li>\n<li>NodeBots: <a href=\"http://nodebots.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://nodebots.io/</a></li>\n<li>Build Pipeline: <a href=\"http://www.martinfowler.com/articles/continuousIntegration.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.martinfowler.com/articles/continuousIntegration.html</a></li>\n<li>Retaliation: <a href=\"https://www.youtube.com/watch?v=1EGk2rvZe8A\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.youtube.com/watch?v=1EGk2rvZe8A</a></li>\n</ul>","frontmatter":{"date":"May 15, 2016","path":"/posts/checking-your-build-in-snap-ci-via-nodebots-using-nodejs-and-arduino","title":"Checking your build in SNAP-CI via Nodebots using NodeJS and Arduino","tags":["nodejs","nodebots"],"status":"active"},"timeToRead":4}},"pageContext":{"postPath":"/posts/checking-your-build-in-snap-ci-via-nodebots-using-nodejs-and-arduino"}},"staticQueryHashes":["1559850390","63159454"],"slicesMap":{}}