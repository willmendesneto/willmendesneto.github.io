{"componentChunkName":"component---src-templates-post-js","path":"/posts/cross-platform-performance-measurements-with-user-timing-apiand-perf-marks/","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c133372fc12b3c0ec752f494adfaf8ef/8313c/perf-marks.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIElEQVQY04WQQUsCURSF5+fVKlz1C2oT1g9okTXiLklzE0HQQMqAk0UxypCYu1m0mDTLXSBpTrooCmYaZ+Zr3pDiIvLA4Z333jmXe68UBAGCYRgyrwUFvjwP47YBv/ep5y+KjMQ/+PS+ea43sC4uGdg2/mTCIkiKcoqqqhiGEZ+aptFpt7lrtbi/usZZWYV6k/fIPB6NME2TUqmIruvUajXK5TKVyjnVqh5npULhkHw+Rza7Tzotk8sd0LYszM4DveMTwqUE7vYuTuGI8VMXpXjG1mYSWd6L/GlSqR0ymQyijtCzkV3Xne1R4DXq5rHZ5GM9ibecYLC2wVu/H/+J0b1ot4K+78c5oR3HQZoufx7TNzcMeIm66t3UsYdDQhbjByKVrLtnfEd2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c133372fc12b3c0ec752f494adfaf8ef/fb34c/perf-marks.avif 320w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/646cd/perf-marks.avif 768w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/8b485/perf-marks.avif 1024w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/a73d6/perf-marks.avif 1280w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/551a4/perf-marks.avif 1674w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/c133372fc12b3c0ec752f494adfaf8ef/cb523/perf-marks.webp 320w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/cd067/perf-marks.webp 768w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/53334/perf-marks.webp 1024w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/4b075/perf-marks.webp 1280w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/3d969/perf-marks.webp 1674w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c133372fc12b3c0ec752f494adfaf8ef/d4f27/perf-marks.png 320w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/778aa/perf-marks.png 768w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/658fc/perf-marks.png 1024w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/26c69/perf-marks.png 1280w,\n/static/c133372fc12b3c0ec752f494adfaf8ef/8313c/perf-marks.png 1674w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c133372fc12b3c0ec752f494adfaf8ef/26c69/perf-marks.png\"\n            alt=\"Perf-Marks NPM Package Logo\"\n            title=\"Perf-Marks NPM Package Logo\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Perf-Marks NPM Package Logo</figcaption>\n  </figure></p>\n<blockquote>\n<p>TL;DR; You can start using <a href=\"https://github.com/willmendesneto/perf-marks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Perf-Marks</a> package in your Frontend (Angular, React, VueJS, Svelte, Ember among others) and Backend apps right now and get the built-in performance, lightweight, isomorphic integration, and a simple and smooth developer experience benefits. Support the project by starring the Github repository and enjoy! üéâ</p>\n</blockquote>\n<hr/>\n<p>** Feel free to play with the online demos powered by Stackblitz <a href=\"https://stackblitz.com/edit/perf-marks-playground\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>https://stackblitz.com/edit/perf-marks-playground</strong></a></p>\n<h2>Introduction</h2>\n<p>Performance bottleneck is a common problem to be facing when working in large frontend application? Problems like memory leaks, and functions having high consume of memory can be real issues in your site and there are some other features there are really useful to improve the performance of your web app... but what if it‚Äôs not enough?</p>\n<p>Also it's good to mention that browsers such as <a href=\"https://techcrunch.com/2019/11/11/google-chrome-to-identify-and-label-slow-websites/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Chrome will identify and label slow websites</a>. That means that performance is not just papercut, having an important role in your website.</p>\n<blockquote>\n<p>Performance is not papercut, this is and always will be about user experience as well.</p>\n</blockquote>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/857a5cbdd084a07cc0983ff5f0d901b7/4d04b/slow-pages.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACmklEQVQ4y22U208TQRTG/U999cFoFKOGSyFq4oVEn1QiRIygEDHGFxKJ14SItEpESoSoLdjt0m4vdHf2fpvPc6ZsQ7GTnOzszJnffufMOXsKNOI4RhRFSJK4N+en53lwHAe+76u1rk/S5+O6rrIgCCClxCkGhmEIo9nGfqUKTa/DFA5cz4dDjpYlFNi2bfJp4qBWR7PVUvsurQta5z32SdO0C/SJLpwAjpeQxQhCVkGWSCSpVB80hYBWO4DRMmA6omeWKyA8mz7uQGZAlkvnSGoDcCuAV+uavQekAQEjUuDDcz0EFD6HfXJwCtLjwCRJCVKHTIKek/RbkJFQKqtaFWtr68iv51HIF1DcKmJ3dxe/d3bw4+sXlH7tqDP9QL9BwBAtW0L4rPgQMhTKcbu4jakHU1iYf4aXL5aw+HwBb5aXsfrxA5YW55D/vNoPjBXQoNyFWFzz8elnTNd/iPQIWNzaIuBDzDyaxt3JScw/mcXTuQWMXDyD+7fPokAqByg0KGcR9hsRmoKSGjHQUo4b3zZw49p1jI3kcOfmLbxbWcH0zCxyV4YwPX4aq29fDw459hx0OiY6pk3ztsohj83vm5jITSA3Oo4L589h+PIljF0dwsjwKB7fm0Dh/asTQL5mV0NsafCFAc8yEHX+UNg2Iiohy7JQKpVQLpehaRU0G3UY9Rr29sqwTBOuYw+45cSjMDsEEV0LaS4ThFQS3DGapkHXD1Ct6tj/W4FpWqpGu83xX9l0a0uesKyTshbjNuQndwc/uUOytcFAmWEkv/SArFDXdVJXhWEYlOcO2u22Mp73tZ4qG2p0hjIwq3p+Z8uArMRxukrYn0cmhPd6wOgoR1kYJiXZPmp6vozjobrUs6yGVfEZ3s9+DizmH2dhZPRPE1TzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/857a5cbdd084a07cc0983ff5f0d901b7/fb34c/slow-pages.avif 320w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/646cd/slow-pages.avif 768w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/8b485/slow-pages.avif 1024w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/a73d6/slow-pages.avif 1280w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/0fb48/slow-pages.avif 1732w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/857a5cbdd084a07cc0983ff5f0d901b7/cb523/slow-pages.webp 320w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/cd067/slow-pages.webp 768w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/53334/slow-pages.webp 1024w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/4b075/slow-pages.webp 1280w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/1f8d0/slow-pages.webp 1732w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/857a5cbdd084a07cc0983ff5f0d901b7/d4f27/slow-pages.png 320w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/778aa/slow-pages.png 768w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/658fc/slow-pages.png 1024w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/26c69/slow-pages.png 1280w,\n/static/857a5cbdd084a07cc0983ff5f0d901b7/4d04b/slow-pages.png 1732w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/857a5cbdd084a07cc0983ff5f0d901b7/26c69/slow-pages.png\"\n            alt=\"Google Chrome will identify and label slow websites\"\n            title=\"Google Chrome will identify and label slow websites\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Google Chrome will identify and label slow websites</figcaption>\n  </figure></p>\n<h2>Defining baselines for performance measurement</h2>\n<p>Making your web app blazing fast üöÄ is crucial for user experience purposes. At first step to improve that, is by identifying and measuring where time is being spent across your pages. </p>\n<p>At first you can use common metrics such as page load errors or high memory consuption due to Long tasks running in your browser. In that case, you can use a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Long_Tasks_API\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Long Task API</a>.</p>\n<h3>Rail Model</h3>\n<p>The experimental Long Tasks API gives us visibility into tasks that take 50 milliseconds or more. The 50 ms threshold comes from the <a href=\"https://web.dev/rail/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RAIL Model</a>, in particular the \"<a href=\"https://web.dev/rail/#response\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Response: process events in under 50 ms</a>\" section. These tasks that are blocking the main thread for 50 ms or more can raise issues such as delays on \"Time to interactive\" metric, High/variable input and event handling latency or even janky animations and scrolling in your project.</p>\n<p><div id=\"gist108709059\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-performance-observer-js\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-performance-observer-js-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-performance-observer-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>observer</span> <span class=pl-c1>=</span> <span class=pl-k>new</span> <span class=pl-v>PerformanceObserver</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-s1>list</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-performance-observer-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>const</span> <span class=pl-s1>freezeThreshold</span> <span class=pl-c1>=</span> <span class=pl-c1>300</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-performance-observer-js-LC3\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>const</span> <span class=pl-s1>perfEntries</span> <span class=pl-c1>=</span> <span class=pl-s1>list</span><span class=pl-kos>.</span><span class=pl-en>getEntries</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-performance-observer-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// Get a list of all the `longtask` entries to be added as payload for your Analytics API</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-performance-observer-js-LC5\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>const</span> <span class=pl-s1>analyticsData</span> <span class=pl-c1>=</span> <span class=pl-s1>perfEntries</span><span class=pl-kos>.</span><span class=pl-en>filter</span><span class=pl-kos>(</span><span class=pl-s1>entry</span> <span class=pl-c1>=&gt;</span> <span class=pl-s1>entry</span><span class=pl-kos>.</span><span class=pl-c1>duration</span> <span class=pl-c1>&gt;</span> <span class=pl-s1>freezeThreshold</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-performance-observer-js-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// In case of any longtask found, it sends the data to be logged in your Analytics platform</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-performance-observer-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>if</span> <span class=pl-kos>(</span><span class=pl-s1>analyticsData</span><span class=pl-kos>.</span><span class=pl-c1>length</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>0</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-performance-observer-js-LC8\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>navigator</span><span class=pl-kos>.</span><span class=pl-en>sendBeacon</span><span class=pl-kos>(</span><span class=pl-s>&#39;/my-analytics-log-platform&#39;</span><span class=pl-kos>,</span> <span class=pl-s1>analyticsData</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-performance-observer-js-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-kos>}</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-performance-observer-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-performance-observer-js-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-performance-observer-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// register observer for long task notifications</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-performance-observer-js-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>observer</span><span class=pl-kos>.</span><span class=pl-en>observe</span><span class=pl-kos>(</span><span class=pl-kos>{</span><span class=pl-c1>entryTypes</span>: <span class=pl-kos>[</span><span class=pl-s>&#39;longtask&#39;</span><span class=pl-kos>]</span><span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-performance-observer-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// Long script execution after this will result in queueing</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-performance-observer-js-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-performance-observer-js-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// and receiving &#39;longtask&#39; entries in the observer.</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/f9b7fc1a1800badf7e24136ccca3af75/raw/53e6f95288b6d67be2eadbc4889bdaf281bf4eeb/performance-observer.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/f9b7fc1a1800badf7e24136ccca3af75#file-performance-observer-js\">performance-observer.js</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<blockquote>\n<p>You can find more details about the RAIL Model <a href=\"https://web.dev/rail/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">on the Web.Dev page for the Model</a>\nFor that, you can cont on <a href=\"https://web.dev/user-timings/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">User Timing API</a></p>\n</blockquote>\n<h3>Core Web Vitals</h3>\n<p>Another metric that can be used is called Core Web Vitals. Web Vitals is an initiative by Google to provide unified guidance for quality signals that are essential to delivering a great user experience on the web. </p>\n<p>The current set is focuses on 3 aspects of the user: <em>experience‚Äîloading, interactivity, and visual stability</em>, including some thresholds.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/461a32627ef023bf11110a66d60fdb24/f26ef/core-web-vitals-metrics.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVQoz1WS3U9TQRDF75/vCzE+8ELwwQcNRgjB+IAkjQ1QIYIEBEsIlPLRhraWtly423u7s/tzdjcYnGSys+fMnP2YyVDz3uN1dT7FzxbxiCVPmMXbJ5wt8GJwUmj8hHdV5LN/AhGwL4SehWcKlCEhHiqmjTw2obrG5md4c4GftjU+ToJOC29HnpNby+ap46FwQTIKzpxj+0yonVgGE4kF1nSUnvL7Dq2B4xswehdvWrEmC0kdJXcv4XsbCv63wyvY0AvdlWlvC1WhpKW6P5TbUR+FO1TtJNjIW3ztbVK0lpHmGrN6DSYThs7w6f6ATmcdd/4R2d3ANU9VsUft/if1/hbl+RL212dkq470D9OTV0dHLFys0Nt/zfjbPGbpAwwGdF3Oq5t19o4WmezMkS+/xTYa+ok93ve3eXf5hfH+G8a1RaqVVaS7F/84Sw0hbqoU4l++WTcSH5lMTBem1woMtcMPlPaP8kNEGxNyM/GO4N5ph72WisQZCf9hA65O4Jxojouc1TGx9lHHJ1fXtcpTvdpfQYVgO6gKfy8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/461a32627ef023bf11110a66d60fdb24/fb34c/core-web-vitals-metrics.avif 320w,\n/static/461a32627ef023bf11110a66d60fdb24/646cd/core-web-vitals-metrics.avif 768w,\n/static/461a32627ef023bf11110a66d60fdb24/8b485/core-web-vitals-metrics.avif 1024w,\n/static/461a32627ef023bf11110a66d60fdb24/a73d6/core-web-vitals-metrics.avif 1280w,\n/static/461a32627ef023bf11110a66d60fdb24/a7f9f/core-web-vitals-metrics.avif 1920w,\n/static/461a32627ef023bf11110a66d60fdb24/f05fe/core-web-vitals-metrics.avif 2142w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/461a32627ef023bf11110a66d60fdb24/cb523/core-web-vitals-metrics.webp 320w,\n/static/461a32627ef023bf11110a66d60fdb24/cd067/core-web-vitals-metrics.webp 768w,\n/static/461a32627ef023bf11110a66d60fdb24/53334/core-web-vitals-metrics.webp 1024w,\n/static/461a32627ef023bf11110a66d60fdb24/4b075/core-web-vitals-metrics.webp 1280w,\n/static/461a32627ef023bf11110a66d60fdb24/f3ff0/core-web-vitals-metrics.webp 1920w,\n/static/461a32627ef023bf11110a66d60fdb24/048a1/core-web-vitals-metrics.webp 2142w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/461a32627ef023bf11110a66d60fdb24/d4f27/core-web-vitals-metrics.png 320w,\n/static/461a32627ef023bf11110a66d60fdb24/778aa/core-web-vitals-metrics.png 768w,\n/static/461a32627ef023bf11110a66d60fdb24/658fc/core-web-vitals-metrics.png 1024w,\n/static/461a32627ef023bf11110a66d60fdb24/26c69/core-web-vitals-metrics.png 1280w,\n/static/461a32627ef023bf11110a66d60fdb24/7d442/core-web-vitals-metrics.png 1920w,\n/static/461a32627ef023bf11110a66d60fdb24/f26ef/core-web-vitals-metrics.png 2142w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/461a32627ef023bf11110a66d60fdb24/26c69/core-web-vitals-metrics.png\"\n            alt=\"Core Web Vitals - the 3 metrics experience‚Äîloading, interactivity, and visual stability \"\n            title=\"Core Web Vitals - the 3 metrics experience‚Äîloading, interactivity, and visual stability \"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Core Web Vitals - the 3 metrics experience‚Äîloading, interactivity, and visual stability </figcaption>\n  </figure></p>\n<h2>Measure User Experience instead of technologies</h2>\n<p>Of course, these are some of the metrics you can use as baseline for your measurement. In combination of that, you can use some techniques to improve the numbers that you analyse from your instrumentation, such as:</p>\n<ul>\n<li>Setting performance budget</li>\n<li>async load components</li>\n<li>critical path management</li>\n<li>optimistic preloading</li>\n</ul>\n<p>But the question still persists. What if we <em>missed</em> something? Which metric is the best for my app? This is something that will always come up, it can be because of unique scenario your app is facing or something else. For critical situations like that, a common suggestion is to track the user experience instead of technology.</p>\n<blockquote>\n<p>Not sure? Just don't measure technology</p>\n</blockquote>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67d52ed4593b663730fb128ce3316c1f/205df/user-experience-is-the-king.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC9UlEQVQ4y4VTWU9TURC+QKWyGNm6UZZKKba0FGigdL1tb2/ZyqJCEKiAQICKijSUzYVFQRYXohAFo0++6YMv/gQT3/0H/hDzOecU0JAYH76cmTnzzZn57lyh0BKFqjqK/MutSNP6kFkaRPYlGedKAsgsC0GhD5Af5vEMvYhsQxg6ezcyikVkka2knByWT/csR/B3T6NrZAnzj9/gzvJLrD37AKl3Biz+cPsdJpO7uL30ArcWn2N58xDTZE/M7WD56RGPMTD+3NoB2mNJCPq6q4j0JXiB1oE5tA8moanpgsndj+iNeXg64hhPbCHUM8MJjsgYrOIQOoYWUC+Pct8VnULz9QSsgSEIChpN0HhTUHkgqD18zJTv5ieTQihoglDoQjqNyn3KTdP5uZ1OJ+Px83y5xLVgYFoxP6+qFeUNPcitiHA9K5r6YPbFoLJ28AIszrTLPub9gZQq+DdYd2pbJwan1zEys4kCczvuPXrFdbt7fw/98VWuKyvOpjvL/2fBnvEHWNp4i1LHNXQOL5KeC1zHld33SKy8Rr65jTYh+P+CDGyc3IowrVIbaRbCBWMz2S18LdhdXlXKPsk9UzBEQdKxnGnCLlMQdBKRAtBWi3RP+6UK065JHIKKJikJ8zzGy2I8KqzkBY+NDEoQimUIWhmxfjvGh22Ij1oxMWKDw+eC3e2GyhxAnikIj+SExiLSgxLS9cTTyafdCspjw2B3IxSupc8vY3vRiF/flajzujA9Vo39FQM+7+mxkazEE8LHnRKszJqoUxn2pkY4fQ76q6TUZKxl1tnWfCV+flGgwubFbNyCw/VyzE5akJiy4GDVgN6eOqwlTFgl7JO/mTTS4834uq/Bt6McFFUFoGBysIIZegmeoBtXeuuhrvTD1OCFzuqHU2xCvZeN64LF6UGlw4ubsRr8+JSPgT47Lb2Mtk4nWqIOXDQEeZeC8qRVLWlRFOGi6+hDGIlcUuNHqd2PMoKh1sd99oAoN9KDYopHEgnqyOnIvwHGK9A//+ApygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/67d52ed4593b663730fb128ce3316c1f/fb34c/user-experience-is-the-king.avif 320w,\n/static/67d52ed4593b663730fb128ce3316c1f/646cd/user-experience-is-the-king.avif 768w,\n/static/67d52ed4593b663730fb128ce3316c1f/8b485/user-experience-is-the-king.avif 1024w,\n/static/67d52ed4593b663730fb128ce3316c1f/a73d6/user-experience-is-the-king.avif 1280w,\n/static/67d52ed4593b663730fb128ce3316c1f/99a72/user-experience-is-the-king.avif 1730w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/67d52ed4593b663730fb128ce3316c1f/cb523/user-experience-is-the-king.webp 320w,\n/static/67d52ed4593b663730fb128ce3316c1f/cd067/user-experience-is-the-king.webp 768w,\n/static/67d52ed4593b663730fb128ce3316c1f/53334/user-experience-is-the-king.webp 1024w,\n/static/67d52ed4593b663730fb128ce3316c1f/4b075/user-experience-is-the-king.webp 1280w,\n/static/67d52ed4593b663730fb128ce3316c1f/8315d/user-experience-is-the-king.webp 1730w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/67d52ed4593b663730fb128ce3316c1f/d4f27/user-experience-is-the-king.png 320w,\n/static/67d52ed4593b663730fb128ce3316c1f/778aa/user-experience-is-the-king.png 768w,\n/static/67d52ed4593b663730fb128ce3316c1f/658fc/user-experience-is-the-king.png 1024w,\n/static/67d52ed4593b663730fb128ce3316c1f/26c69/user-experience-is-the-king.png 1280w,\n/static/67d52ed4593b663730fb128ce3316c1f/205df/user-experience-is-the-king.png 1730w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/67d52ed4593b663730fb128ce3316c1f/26c69/user-experience-is-the-king.png\"\n            alt=\"User Experience is always the king\"\n            title=\"User Experience is always the king\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">User Experience is always the king</figcaption>\n  </figure>\nAt the end, the user won't know anything about Javascript Frameworks, CSS, Client-side or server-side rendering.</p>\n<p>On the other hand, they will know if your website image is using async load and it's taking more than 2 seconds to be visible. This might affect their experience drastically! </p>\n<hr/>\n<h2>User Timing API and performance measures</h2>\n<p><a href=\"https://web.dev/user-timings/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">User Timing API</a> is an important API if you want to measure performance in your Javascript API‚Äôs, components, and pages. It allows the developer to create application specific timestamps that are part of the browser's performance timeline. There are two types of user defined timing event types: the <code class=\"language-text\">mark</code> event type and the <code class=\"language-text\">measure</code> event type.</p>\n<p>These events are named by the instrumented application and can be set at any location in an application. measure events are also named by the application but they are placed between two marks thus they are effectively a midpoint between two marks. You can access those data from JavaScript using the API or by viewing them on your <a href=\"https://developer.chrome.com/docs/devtools/evaluate-performance/reference/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Chrome DevTools Timeline Recordings</a> and in your <a href=\"https://developers.google.com/web/tools/lighthouse/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">reports via Lighthouse Audition</a>.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f325d5d93ebcb7982afe5b59e2d79a21/1a152/lighthouse-user-timing-report.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.9375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABH0lEQVQoz52S2bKEIAxE/f/PnFLcdwX3jIepeNXHa1UEOqS7CQRd10mSJBLHsaTnmKa/eT8MUteVlGUpy7LIuq6PANNQbNs2Cay1EkWRJCeJiTP5mELyspaua6Xve0Gwbdtr1DnRNM2FMfeE/OZ59grTsklvT6Vd/vXt+/5ziALEkO7b35E47jiOjyMyx0CWZY92wAEWUIBdPl9465MxRvI8v8S0T25yEoahzyleFMXZ/1QC55xnrqpKcKvFKIODvS+EGi6SmjvG3kDtw45b+qCkeiTWijFO0+TdcTLFCN9Dkol/Lqm/VXWnQuTfTwQntEMF7/EgtM7KcRyXSwjZxFoxRjBqINSchu8hajzm4XzM6g4hRMizvgc5xLiId+4LrLEHbN6WaL8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f325d5d93ebcb7982afe5b59e2d79a21/fb34c/lighthouse-user-timing-report.avif 320w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/646cd/lighthouse-user-timing-report.avif 768w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/8b485/lighthouse-user-timing-report.avif 1024w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/a73d6/lighthouse-user-timing-report.avif 1280w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/3224e/lighthouse-user-timing-report.avif 1600w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/f325d5d93ebcb7982afe5b59e2d79a21/cb523/lighthouse-user-timing-report.webp 320w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/cd067/lighthouse-user-timing-report.webp 768w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/53334/lighthouse-user-timing-report.webp 1024w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/4b075/lighthouse-user-timing-report.webp 1280w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/43d96/lighthouse-user-timing-report.webp 1600w\"\n              sizes=\"(max-width: 1280px) 100vw, 1280px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f325d5d93ebcb7982afe5b59e2d79a21/d4f27/lighthouse-user-timing-report.png 320w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/778aa/lighthouse-user-timing-report.png 768w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/658fc/lighthouse-user-timing-report.png 1024w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/26c69/lighthouse-user-timing-report.png 1280w,\n/static/f325d5d93ebcb7982afe5b59e2d79a21/1a152/lighthouse-user-timing-report.png 1600w\"\n            sizes=\"(max-width: 1280px) 100vw, 1280px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f325d5d93ebcb7982afe5b59e2d79a21/26c69/lighthouse-user-timing-report.png\"\n            alt=\"Example showing how LightHouse Auditions will show User Timing API instrumentation\"\n            title=\"Example showing how LightHouse Auditions will show User Timing API instrumentation\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Example showing how LightHouse Auditions will show User Timing API instrumentation</figcaption>\n  </figure></p>\n<h2>Simplifying User Timing API dev experience across Frontend and Backend with Perf-Marks package</h2>\n<p>Even though we have all built-in support for us to instrument and measure our pages and API's, their integrations are quite different between frontend and backend. It means that they don't have the same Developer Experience - aka DX - between isomorphic applications using Javascript! As an example, this is a simple code showing how to integrate User Timing API on the backend side in a NodeJS application.</p>\n<p><div id=\"gist108709399\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-perf-node-js\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-perf-node-js-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-perf-node-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-kos>{</span> performance<span class=pl-kos>,</span> PerformanceObserver <span class=pl-kos>}</span> <span class=pl-c1>=</span> <span class=pl-en>require</span><span class=pl-kos>(</span><span class=pl-s>&#39;perf_hooks&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-perf-node-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-perf-node-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>marker</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;my-marker&#39;</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-perf-node-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-perf-node-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>observer</span> <span class=pl-c1>=</span> <span class=pl-k>new</span> <span class=pl-v>PerformanceObserver</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-s1>list</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-perf-node-js-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// Using `console.log()` to display metrics for `my-marker`</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-perf-node-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// After that, this observer will be disconnected</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-perf-node-js-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>list</span><span class=pl-kos>.</span><span class=pl-en>getEntries</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>.</span><span class=pl-en>find</span><span class=pl-kos>(</span><span class=pl-s1>i</span> <span class=pl-c1>=&gt;</span> <span class=pl-s1>i</span><span class=pl-kos>.</span><span class=pl-c1>name</span> <span class=pl-c1>===</span> <span class=pl-s1>marker</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-perf-node-js-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-s1>observer</span><span class=pl-kos>.</span><span class=pl-en>disconnect</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-perf-node-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-perf-node-js-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-perf-node-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>observer</span><span class=pl-kos>.</span><span class=pl-en>observe</span><span class=pl-kos>(</span><span class=pl-kos>{</span> <span class=pl-c1>entryTypes</span>: <span class=pl-kos>[</span><span class=pl-s>&#39;measure&#39;</span><span class=pl-kos>]</span> <span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-perf-node-js-LC13\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-perf-node-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// Starting the marker</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-perf-node-js-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>performance</span><span class=pl-kos>.</span><span class=pl-en>mark</span><span class=pl-kos>(</span><span class=pl-s1>marker</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-perf-node-js-LC16\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-perf-node-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-perf-node-js-LC18\" class=\"blob-code blob-code-inner js-file-line\">   </td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-perf-node-js-LC19\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// Calling the marker for comparison</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-perf-node-js-LC20\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-s1>performance</span><span class=pl-kos>.</span><span class=pl-en>mark</span><span class=pl-kos>(</span><span class=pl-s>`<span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>marker</span><span class=pl-kos>}</span></span>-end`</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-perf-node-js-LC21\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-perf-node-js-LC22\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-s1>performance</span><span class=pl-kos>.</span><span class=pl-en>measure</span><span class=pl-kos>(</span><span class=pl-s1>marker</span><span class=pl-kos>,</span> <span class=pl-s1>marker</span><span class=pl-kos>,</span> <span class=pl-s>`<span class=pl-s1><span class=pl-kos>${</span><span class=pl-s1>marker</span><span class=pl-kos>}</span></span>-end`</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-perf-node-js-LC23\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-c1>1000</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-node-js-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-perf-node-js-LC24\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-c1>2000</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/c0abc2a0c8d0ced80c94fde7ac73e44e/raw/66b6323e75954fdeb05c7f19a620f03ed44ae87e/perf-node.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/c0abc2a0c8d0ced80c94fde7ac73e44e#file-perf-node-js\">perf-node.js</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>To solve this and other problems like having a common API between Backend and Frontend, with full support for intrumentation in isomorphic applications and more I created the package called <a href=\"https://github.com/willmendesneto/perf-marks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Perf-Marks</a>.</p>\n<p><a href=\"http://www.youtube.com/watch?v=vxNg3vM1P0A\" title=\"Video showing how to use perf-marks package\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><img src=\"http://img.youtube.com/vi/vxNg3vM1P0A/0.jpg\"></a></p>\n<p><a href=\"https://github.com/willmendesneto/perf-marks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Perf-Marks</a> is the isomorphic, simplest, and lightweight solution for User Timing API in Javascript - üöÄ only 208B üöÄ. Tree-shaking and entry points built-in. Simple as that!</p>\n<h3>Bundle and package size matters</h3>\n<p>Bundle and package sizes are always important and this is something to keep in mind when thinking about this module.</p>\n<p>The module supports multiple animations, themes, supports for better web accessibility and more feature with an impressive bundle size of <strong>208B</strong> and the package has <strong>140kB</strong> to be installed in an application üéâ</p>\n<h3>Easy entry points integration to avoid increase in your bundle</h3>\n<p>By using Perf-Marks you can easily instrument your Frontend Apps, components, libraries and API's without any friction. The integration is the same between layers and it also follows some best practices.</p>\n<p>Instead of load all the package methods, you can import what you need via entry points and avoid your app the load unnecessary code at that moment. This example shows how to measure a specific method by exporting perf-marks <code class=\"language-text\">profiler()</code> function via <code class=\"language-text\">perf-marks/profiler</code> entry point.</p>\n<p><div id=\"gist108709502\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-using-perf-marks-js\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-using-perf-marks-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-kos>{</span> <span class=pl-s1>profiler</span> <span class=pl-kos>}</span> <span class=pl-k>from</span> <span class=pl-s>&#39;perf-marks/profiler&#39;</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-using-perf-marks-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-using-perf-marks-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>marker</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;my-marker&#39;</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-using-perf-marks-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-using-perf-marks-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-en>someExpensiveMemoryAndTimeTask</span> <span class=pl-c1>=</span> <span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-c1>1</span> <span class=pl-c1>+</span> <span class=pl-c1>1</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-using-perf-marks-js-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-using-perf-marks-js-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// Just need to wrap your function with `profiler()` method and that&#39;s it!</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-using-perf-marks-js-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// Easy peasy, lemon squeezy! üçã</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-using-perf-marks-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>profiler</span><span class=pl-kos>(</span><span class=pl-k>async</span> <span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-using-perf-marks-js-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return</span> <span class=pl-k>new</span> <span class=pl-v>Promise</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-s1>resolve</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-using-perf-marks-js-LC11\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-using-perf-marks-js-LC12\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-using-perf-marks-js-LC13\" class=\"blob-code blob-code-inner js-file-line\">        <span class=pl-s1>resolve</span><span class=pl-kos>(</span><span class=pl-en>someExpensiveMemoryAndTimeTask</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-using-perf-marks-js-LC14\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-c1>1000</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-using-perf-marks-js-LC15\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-c1>2000</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-using-perf-marks-js-LC16\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-using-perf-marks-js-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-using-perf-marks-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-s1>marker</span><span class=pl-kos>)</span><span class=pl-kos>.</span><span class=pl-en>then</span><span class=pl-kos>(</span><span class=pl-s1>result</span> <span class=pl-c1>=&gt;</span> <span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>result</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/41985f16808602e62510f3c994edebbc/raw/e092abe01b36d93f35b806776363f16d61cf42e1/using-perf-marks.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/41985f16808602e62510f3c994edebbc#file-using-perf-marks-js\">using-perf-marks.js</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Smooth integration between Frontend and Backend</h3>\n<p>All the logic to manage the integration between frontend and backend, client-side and server-side is handled by perf-marks. So your developers should have confidence on their instrumentation by simply doing something like this! Easy peasy, lemon squeezy üçã!</p>\n<p><div id=\"gist108709664\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-perf-marks-js\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-perf-marks-js-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-perf-marks-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>import</span> <span class=pl-kos>{</span> <span class=pl-s1>start</span><span class=pl-kos>,</span> <span class=pl-s1>end</span> <span class=pl-kos>}</span> <span class=pl-k>from</span> <span class=pl-s>&#39;perf-marks/marks&#39;</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-perf-marks-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-perf-marks-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>marker</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;my-marker&#39;</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-perf-marks-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-perf-marks-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// Starting the marker</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-perf-marks-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>start</span><span class=pl-kos>(</span><span class=pl-s1>marker</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-perf-marks-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-perf-marks-js-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-c1>=&gt;</span> <span class=pl-kos>{</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-perf-marks-js-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-c>// Calling the marker for comparison</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-perf-marks-js-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-en>end</span><span class=pl-kos>(</span><span class=pl-s1>marker</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-perf-marks-js-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-perf-marks-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-c1>2000</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/willmendesneto/5b82b65ef17877b59c7434e9d495eb8d/raw/513d30adf5955ca9127873291dd479f036d25985/perf-marks.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/willmendesneto/5b82b65ef17877b59c7434e9d495eb8d#file-perf-marks-js\">perf-marks.js</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Flexible ways to measure what matters in your app</h3>\n<p>You might also measure things like A/B Testing time to load, interactions and user journey! For example, how long the users are interacting with your galleries, how long your API is responding some data to your consumers or how long your Frontend Application located in one AWS Region is taking to upload some files to a distinct AWS region, understand the delays and solve that in advance, in a proactive way!</p>\n<p><img src=\"/fd30a21513f805c11bcbf30f285232e1/user-journey-and-perf-marks-in-action.gif\" alt=\"User Journey and Perf-Marks in action\"></p>\n<hr/>\n<h3>That‚Äôs all for now</h3>\n<p>Stay tuned because this is not the end, it's just the beginning. Let's keep building awesome stuff and have some <strong>#fun</strong> üöÄ</p>\n<p>I hope you enjoyed this reading as much as I enjoyed writing it. Thank you so much for reading until the end and see you soon!</p>\n<hr />\n<h3>Cya üëã</h3>","frontmatter":{"date":"March 29, 2021","path":"/posts/cross-platform-performance-measurements-with-user-timing-apiand-perf-marks/","title":"Cross-platform performance measurements with User Timing API and perf-marks","tags":["frontend","nodejs","npm","javascript","tip","js","tooling","performance"]},"timeToRead":11}},"pageContext":{}},"staticQueryHashes":["1559850390","63159454"]}