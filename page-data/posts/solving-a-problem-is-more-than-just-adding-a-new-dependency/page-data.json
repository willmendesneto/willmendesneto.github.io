{"componentChunkName":"component---src-templates-post-js","path":"/posts/solving-a-problem-is-more-than-just-adding-a-new-dependency/","result":{"data":{"markdownRemark":{"html":"<p><img src=\"https://cdn-images-1.medium.com/max/2560/1*t6F7uYkRCKuCM2Rh_D0NVA.png\" alt=\"\"></p>\n<blockquote>\n<p><em>My main goal in this post is starting some discussions about the criteria used to add a new dependency on several projects. So this should be something to keep in mind and start a broader discussion.</em></p>\n</blockquote>\n<h3>Introduction: the problem</h3>\n<p>On our daily basis work, we usually need to do some improvements, add some features or solve some bugs. For several times we need to have a look forward to a new library to solve those.</p>\n<p>As good‚Ää‚Äî‚Ääand also lazy‚Ää‚Äî‚Äädevelopers, one of the first things that came in our mind will be \"Don‚Äôt reinvent the wheel\" and looking for options you found a library that can help you in your issue, feature, or improvement.</p>\n<h3>First things first: why should I use this¬†library?</h3>\n<p>At the first time, this section can sound redundant, but it isn't‚Ää‚Äî‚Äätrust me. It's always good to keep in mind what you want to achieve before even start looking for something or add a dependency/development dependency on your project.</p>\n<p>Every dependency adds more time to create the first artifact to start automated validation, will invalidate cache in different layers until production (not just frontend, a docker cache of your app can be invalidated in that case, for example), and result in a bundle increase. How can we create awareness of those things, then? Time to bring transparency into that.</p>\n<p>As an example of how this aspect can be applied in different teams, <a href=\"https://atlaskit.atlassian.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>Atlaskit</strong></a> has a transparent integration on Slack and Bitbucket, which gives us all the information about the bundle size of each package, which makes us think twice about the node packages we were using on our components.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*Bk6h7S20gDYfIH0v57iCCQ.png\" alt=\"\"></p>\n<blockquote>\n<p>You can find more details about that on the pull request at the Bitbucket repository of <a href=\"https://bitbucket.org/atlassian/atlaskit-mk-2/pull-requests/7385/ci-adding-eslint-rule-for-polyfills-in/diff\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Atlaskit monorepo¬†project</a></p>\n</blockquote>\n<p>A benefit of that was to make things easy to dig and start some discussions focusing on performance improvements, which components can be loaded async and which dependencies could be removed on the main task. As an example, we have a package to provide a better and navigation experience across our products.</p>\n<p>To give us a better page-load and improve the performance of our products, we decided to follow the <a href=\"https://developers.google.com/web/fundamentals/performance/rail\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>RAIL model</strong></a><strong>,</strong> moving towards the Performance Budget's approach.</p>\n<p>In order to achieve that, some techniques such as code-splitting, async loading, and stream content were applied and we got a huge benefit in our request files with optimized and parallelized and the bundle size for the package was reduced massively: from <strong>500kB</strong> to <strong>30kB!</strong></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*iPDfR_B9VRtLUBbDNCp-qA.png\" alt=\"\"></p>\n<blockquote>\n<p>You can find more details about the code on the Atlaskit pull request adding <a href=\"https://bitbucket.org/atlassian/atlaskit-mk-2/pull-requests/3639/code-splitting-components-and-exposing/diff\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>code-splitting on Navigation next component</strong></a>.</p>\n</blockquote>\n<h3>What should I check and how can I deal with these scenarios?</h3>\n<p>But that was a scenario when these things were clear, what about when they‚Äôre not that much? Some of these points can be happening with your team and, eventually, the chose package can show one or more of these points.</p>\n<h3>1. Lack of maintenance</h3>\n<p>It can be related to different things such as the library is working fine and the problem they are trying to solve is done apart from a few bug fixes, the team deprecated the library in favor of another modern tooling, lack of reply in issues and open pull requests.</p>\n<blockquote>\n<p><em>What if we find a bug on it, open an issue and a pull request solving it and it took a long¬†time?</em></p>\n</blockquote>\n<p>If you ask for your team the question and the answer is an unknown you can think of a solution such as a fork the repository (in case the library has an <a href=\"https://en.wikipedia.org/wiki/Permissive_software_license\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>opensource permissive license</strong></a> üòâ ) and wait for the library to solve it.</p>\n<p>But this scenario can start another issue, having someone as a maintainer and making hard to have some improvements, bug fixes and new features of the main library in your forked one.</p>\n<p>Of course, it‚Äôs a case-by-case issue and each team has ownership to solve with the best knowledge they have.</p>\n<h3>2. Great tool, but nothing to guide¬†you</h3>\n<p>In this section have proper/non-vague documentation is the main takeaway. We are in the land of the beauty when all the code examples are working like a charm, but it‚Äôs not friendly when you have to know something more than a \"How to¬†‚Ä¶\", \"Getting started\" docs.</p>\n<p>In case you‚Äôre moving for this library anyways for some really valuable reason, such as this library is <em>way</em> better than all the other options, please make sure you will contribute with their official docs, writing blog posts (internally and externally) or in the worse scenario sharing your knowledge with your team.</p>\n<h3>3. Hard to contribute on the¬†codebase</h3>\n<p>This is not the place you want to be, neither an experience you‚Äôre keen to have. That‚Äôs the scenario when the project is definitely <em>amazing</em>, but there‚Äôs a huge risk in use it because of reasons such as:</p>\n<ul>\n<li>Non-permissive license;</li>\n<li>There‚Äôs no continuous integration/continuous deployment/continuous delivery integration;</li>\n<li>There‚Äôs no <code class=\"language-text\">CONTRIBUTION.md</code> file or GitHub/BitBucket templates for issues and pull requests with a proper description;</li>\n<li>No easy way to do a local setup, neither a good <a href=\"https://medium.com/@albertcavalcante/what-is-dx-developer-experience-401a0e44a9d9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>developer experience</strong></a>;</li>\n<li>Nothing defined regards to test architecture, code styling or possible candidates for some automation/validation;</li>\n</ul>\n<p>In case you want to move it forward with the option #3, <em>please</em> make sure that you know that a <em>proactive approach</em> can be applied in this case as well, not only inside your company and/or codebase üòâ</p>\n<p>As an example, <code class=\"language-text\">@atlaskit/navigation-next</code> was using few libraries without some of these points and I sent some pull requests from those applying few improvements, such as:</p>\n<ul>\n<li>Adding a CI integration;</li>\n<li>Adding a test architecture;</li>\n<li>Improving automation in the repository;</li>\n</ul>\n<p>Open issues when I couldn‚Äôt do some of the improvements can be an approach and if things can‚Äôt be sorted out, you will have a really hard decision to make: <em>keep it or leave it</em>.</p>\n<h3>Helping open source¬†projects</h3>\n<p>As you already notice, some of these problems can be solved by contribution, that‚Äôs the spirit of use opensource: you should give back to the community.</p>\n<p>I've found some packages heavily used across several codebases without any tests, documentation, and a lot of issues, with folks totally keen to have these points improved in their codebase. In these scenarios, you can jump into the code to understand more how the library is solving a few of the issues or open an issue to start a discussion about it.</p>\n<p>I sent some pull requests and opened issues on these libs and I would like to share a <strong><em>HUGE</em></strong> <strong><em>thank you</em></strong> for all the discussions we had during the process.</p>\n<p>Everyone does the best they can to get things done, but we‚Äôre (usually) not being paid to help open source projects <em>directly.</em> So please be kind, humble, and as we always do, try to be the change you seek</p>\n<hr/>\n<h3>That‚Äôs all for¬†now</h3>\n<p>It was great to write this blog post, it just brings me back a lot of memories and a few of the reasons why I started contributing to opensource projects such as <em>Oh-my-ZSH</em>, <em>Webpack</em>, <em>Angular</em> and our ‚ù§ <em>React</em>.</p>\n<p>If you can‚Äôt contribute directly it‚Äôs ok, this is not something mandatory‚Ä¶ but try to keep in mind how easy or hard it will be your life and the customer‚Äôs life if you use a library without some of the points and be more conscious about your choices, why you need that and possible risk management in case of things move to any possible unhappy path.</p>\n<p>I don‚Äôt have the answers and that‚Äôs not the goal of this post. I‚Äôm starting with the questions and calling everyone for an open discussion looking for awareness, knowledge sharing to check how your team is doing that and thinking about possible solutions üöÄ üöÄ</p>\n<h3>Cya üëã</h3>","frontmatter":{"date":"January 19, 2020","path":"/posts/solving-a-problem-is-more-than-just-adding-a-new-dependency","title":"Solving a problem is more than just adding a new dependency","tags":["frontend","performance","javascript","tests"],"status":"active"},"timeToRead":5}},"pageContext":{"postPath":"/posts/solving-a-problem-is-more-than-just-adding-a-new-dependency"}},"staticQueryHashes":["1559850390","63159454"],"slicesMap":{}}