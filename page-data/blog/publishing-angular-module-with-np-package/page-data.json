{"componentChunkName":"component---src-templates-post-js","path":"/blog/publishing-angular-module-with-np-package","result":{"data":{"markdownRemark":{"html":"<p>This is one of the posts about the improvements I've done on <a href=\"https://github.com/willmendesneto/ngx-feature-toggle/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ngx-feature-toggle module</a> and in today the topic is: how to publish a new version of my angular module or angular application.</p>\n<p>Until few months ago, we had several ways to publish an Angular package, independent or module or application. Currently, we can use <code class=\"language-text\">@angular/cli</code> directly to create, run tests, validations, builds and more via CLI commands, which's really useful.</p>\n<p><a href=\"https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4\" title=\"https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>Version 6 of Angular Now Available</strong>\n<em>The 6.0.0 release of Angular is here! This is a major release focused less on the underlying framework, and more on theâ€¦</em>blog.angular.io</a><a href=\"https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"></a></p>\n<blockquote>\n<p>You can read more about it on \"<a href=\"https://github.com/angular/angular-cli/blob/master/docs/documentation/stories/create-library.md#publishing-your-library\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Publishing your library</a>\" section on AngularÂ docs</p>\n</blockquote>\n<p>With that, we can use the same features having the same support to build great libraries as well. You just need to run these commands and all your support is up-to-date ðŸŽ‰. But a good package should follow some good software principles.</p>\n<p>Publish versions needs to be based on <a href=\"https://semver.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Semantic versioning</a>. This standard was created to make sure that upgrade your project using that component should be smooth as much as possible.</p>\n<p>We need to <a href=\"https://keepachangelog.com/en/1.0.0/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">keep a changelog</a> (a ) file with all the changes that happened in the project since the beginning. Usually, in opensource (and non-opensource) projects keep the changes/features/fixes/etc. in a file called<code class=\"language-text\">CHANGELOG.md</code></p>\n<p>Needs to have a well-defined process to build, bundle and publish. But as you can see in different Angular Projects, there are lots of different ways to publish an Angular module and based in a way to cover different bundle types to be published, such as <strong>ESM2015</strong>, <strong>FESM2015</strong>, <strong>FESM5</strong>, <strong>ESM5</strong>, <strong>UMD</strong> and more that NG-Packagr was built.</p>\n<p>Another good decision the Angular CLI team applied was to integrate the publish Angular libraries with Angular-CLI using <a href=\"https://www.npmjs.com/package/ng-packagr\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ng-packagr</a>, a package that transpile your libraries to Angular Package Format.</p>\n<p>Some projects are using shell scriptsâ€¦</p>\n<p>undefined\nundefined</p>\n<p>â€¦or even build systems using Gulp, as used on <a href=\"https://github.com/angular/material2/blob/master/package.json#L15-L25\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Angular Material</a>.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*8bRO8CtMTJv5ONcKN3cF_Q.png\">\nundefined</p>\n<p>However, the<code class=\"language-text\">npm publish</code> command by default doesn't trigger any tests and validations. So what you we do in that case?</p>\n<p>To cover this scenario and avoid different approaches to publish a package, having a simple way to ship the new versions with all the steps described here in this post and more, I'm glad to share I added support for folder contents, as existent in <code class=\"language-text\">np publish</code> command.</p>\n<p>How to use it:</p>\n<ul>\n<li>Follow the npm events that <a href=\"https://www.npmjs.com/package/np\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>np</strong></a> triggers: <code class=\"language-text\">test</code>, <code class=\"language-text\">version</code> and <code class=\"language-text\">publish</code>;</li>\n<li>Make sure that the bundle folder with the <code class=\"language-text\">package.json</code> generated internally by NG-Packagr has the <code class=\"language-text\">package.json</code> in the root folder;</li>\n<li>Be happy, you donâ€™t need more shell-scripts or manual steps to publish you code!</li>\n</ul>\n<hr/>\n<p>So that's all for now. Follow these steps, run <code class=\"language-text\">np &lt;patch|minor|major&gt; --no-yarn --contents=./dist</code> for an Angular application, or <code class=\"language-text\">np &lt;patch|minor|major&gt; â€”-no-yarn --contents=./dist/&lt;your-angular-module&gt;</code> in case you're publishing an Angular module and you're good to go without any problem at all! ðŸŽ‰ðŸŽ‰ðŸŽ‰</p>\n<p>If you want to check an example, please take a look at the setup of <code class=\"language-text\">[ngx-feature-toggle](https://www.npmjs.com/package/ngx-feature-toggle)</code> and <code class=\"language-text\">[ngx-skeleton-loader](https://github.com/willmendesneto/ngx-skeleton-loader)</code> packages.</p>\n<p>â€¦ and what if I told you can use <code class=\"language-text\">@angular/cli</code>` and add all your components there, using it as a mono-repository? But this is a topic for another postÂ ;)</p>\n<p>Cya ðŸ‘‹</p>","frontmatter":{"date":"August 15, 2018","path":"/blog/publishing-angular-module-with-np-package","title":"Publishing Angular Module with NP package"},"timeToRead":3}},"pageContext":{}},"staticQueryHashes":["63159454"]}