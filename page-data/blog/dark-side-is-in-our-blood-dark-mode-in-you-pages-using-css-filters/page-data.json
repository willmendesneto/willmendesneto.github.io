{"componentChunkName":"component---src-templates-post-js","path":"/blog/dark-side-is-in-our-blood-dark-mode-in-you-pages-using-css-filters","result":{"data":{"markdownRemark":{"html":"<p><img src=\"https://cdn-images-1.medium.com/max/2560/1*wVLiNqxa4OyomTMG8VaGbg.png\"></p>\n<blockquote>\n<p>TL;DR; use these tips and get a dark mode in your web app. You can find a pull request adding the changes in <a href=\"https://github.com/willmendesneto/willmendesneto.github.io/commit/da46a0e4a22791861231cbbd481124367769e352\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this link</a> Enjoy!Â ðŸŽ‰</p>\n</blockquote>\n<h3>Dark mode and Web Accessibility: respecting the user'sÂ choice</h3>\n<p>We can see several pages with the dark-mode theme available for the users. This approach is more than design-only purposes but also covers usability and accessibility.</p>\n<p>One of the most popular responses when you ask someone who is using dark-mode option on their web apps and/or their OSâ€Šâ€”â€Šoperational systemsâ€Šâ€”â€Šis that \"it helps my eyes,\" or even \"itâ€™s elegant/neat/beautiful.\" However, Dark Mode developer documentation explicitly writes: \"The choice of whether to enable light or dark appearance is an aesthetic one for most users, and might not relate to ambient lighting conditions.\"</p>\n<p>Besides that, people with low vision can have some benefits having the option as well, preferring light text on a dark background by inverting the colors on the display, except for images, media, and some apps that use dark color styles. So that means your web app should support dark-mode if you're thinking and targeting accessibility.</p>\n<blockquote>\n<p>Itâ€™s more than a choice, itâ€™s about to build a web for everybody.</p>\n</blockquote>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*T4yacXhMVUhfCKpcgFrJAg.gif\"></p>\n<h3>Dark mode via CSS mediaÂ query</h3>\n<p>Thinking about the web as a powerful platform it is, we should expect an easy and simple integration. In this section, we'll dive into the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>prefers-color-scheme</strong></a> media query and how we can use CSS to support dark mode.</p>\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>prefers-color-scheme</strong></a> media feature can detect if the user has requested the page to use a light or dark color theme via operational system configuration. It accepts <em>light</em> or <em>dark</em> as values to notify the page if the current user chooses a page that has a light or dark theme.</p>\n<p>One of the common approaches used to implement this feature is by adding a CSS Filter in your page. When you add the <em>invert()</em> CSS filter when it's dark and your background is white and your text is black, it inverts the colors.</p>\n<blockquote>\n<p>Please check the <a href=\"https://caniuse.com/#search=css%20filter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>browser support for CSS Filter</strong></a> based in your browser support list before useÂ it</p>\n</blockquote>\n<p>undefined</p>\n<p>At the end, when the user system is with using dark-mode enabled, the page applies the rules added inside the media query content, so the background will be turned into black and the text will be white.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*5gGJBP_1RjhyIg-jQvtn1w.gif\"></p>\n<h3>Dynamic Dark-Mode Javascript</h3>\n<p>Your pages can integrate dark-mode using Javascript as a combination to do so. It's important to understand that CSS and Javascript will use different memory partitions in your browser, so your users could have some benefits in performance and usability by combining both approaches.</p>\n<h3>Changing the theme by adding CSSÂ classes</h3>\n<p>First of all, let's add a switch on the page to give the user the choice to toggle between light and dark modes. So when it's clicked, the page will be dark and by default, it will be using the light theme.</p>\n<p>This is the HTML markup for the toggle that will be added in your page</p>\n<p>undefined</p>\n<p>Besides that, we need to apply some changes in our CSS. Now it also has classes to define if the current theme on the page is light or dark by adding <strong>light-mode</strong> and <strong>dark-mode</strong> classes and the styles for Switch Toggle Element into our HTML element. This will be the CSS with these changes.</p>\n<p>undefined</p>\n<p>After these changes, let's write the Javascript to manipulate and add the class to our page. Firstly, we should check if window.matchMedia is available on the userâ€™s browser. If it is, we can start the javascript manipulation.</p>\n<p>Secondly, it should check if dark mode is enabled via OS on page load, so it can add the dark-mode class and trigger the toggle on the switch. If it's supported we'll check if the HTML element already has any class (on page-load it won't have any class on it) so it adds or switches between light and dark mode classes and triggers a change on the switch to keep aligned with the current theme state.</p>\n<p>Another good point in this step is that it should change the Switch Toggle content to be visible in case the browser supports it. Otherwise, it will be hidden via CSS.</p>\n<p>This is the final state for the Javascript integration.</p>\n<p>undefined</p>\n<p>And this is the result of the switch to turn on and off your dark-mode in your page.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*dIp1YtdPuHqlU6NQ0XdsAA.gif\"></p>\n<h3>Listening for dark mode changes inÂ OS</h3>\n<p>Now we can change slightly our javascript file to Adds a listener for dark mode changes via user system preferences. We can reuse the previous value for <a href=\"https://caniuse.com/#search=matchMedia\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>matchMedia</strong></a> method and add a listener to the changes.</p>\n<p>undefined</p>\n<h3>Adding betterÂ events</h3>\n<p>Another improvement you can apply is to use the better event listener for the current user device by using <strong>touchstart</strong> if is a mobile device. Otherwise, it will trigger based on the <strong>click</strong> event.</p>\n<p>With all these changes, this will be the final version of the Javascript file.</p>\n<hr/>\n<h3>Thatâ€™s all forÂ now</h3>\n<p>It was great to write this blog post and see the evolution of the Web as Platform and how quick you can do amazing things like thatâ€Šâ€”â€Šand even more if you likeâ€Šâ€”â€Šin your pages.</p>\n<p>If you like to know more about it, I'm applying this and other experiments on my personal website <a href=\"https://willmendesneto.github.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>https://willmendesneto.github.io</strong></a>, or check the pull request adding this feature on the <a href=\"https://github.com/willmendesneto/willmendesneto.github.io/commit/da46a0e4a22791861231cbbd481124367769e352\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>Github repository of my personal website</strong></a>.</p>\n<p>Last, but not least, this is one of the various approaches that can be used to support dark-mode in your app. In the end, most important than the approach is to add it, keeping in mind that:</p>\n<blockquote>\n<p>It can be Light or Dark mode, but more than this: let the users choose whatâ€™s best forÂ them</p>\n</blockquote>\n<p>I hope you enjoyed this reading as much as I enjoyed writing it. Thank you so much for reading until the end and see you soon!</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*tT2KIJkX4dhynNYipnVNmg.gif\"></p>\n<h3>Cya ðŸ‘‹</h3>","frontmatter":{"date":"July 06, 2020","path":"/blog/dark-side-is-in-our-blood-dark-mode-in-you-pages-using-css-filters","title":"Dark Side Is In Our Bloodâ€Šâ€”â€ŠDark mode in you pages using CSS Filters"},"timeToRead":5}},"pageContext":{}},"staticQueryHashes":["63159454"]}